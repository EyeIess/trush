

<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from www.net-snmp.org/wiki/index.php?title=Git_Branch_Management&action=edit by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 May 2024 19:28:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>View source for Git Branch Management - Net-SNMP Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":0,"wgPageName":"Git_Branch_Management","wgTitle":"Git Branch Management","wgCurRevisionId":5208,"wgRevisionId":0,"wgArticleId":2196,"wgIsArticle":!1,"wgIsRedirect":!1,"wgAction":"edit","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":!0,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Git_Branch_Management","wgRelevantArticleId":2196,"wgIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits"]);
} );</script>
<link rel="stylesheet" href="load34a1.css?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook" />
<!--[if IE 6]><link rel="stylesheet" href="/wiki/skins/MonoBook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/wiki/skins/MonoBook/IE70Fixes.css?303" media="screen" /><![endif]-->
<meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}</style>
<script async="" src="load3a95.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook"></script>
<meta name="generator" content="MediaWiki 1.26.3" />
<meta name="robots" content="noindex,nofollow" />
<link rel="shortcut icon" href="http://www.net-snmp.org/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="http://www.net-snmp.org/wiki/opensearch_desc.php" title="Net-SNMP Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://www.net-snmp.org/wiki/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Net-SNMP Wiki Atom feed" href="http://www.net-snmp.org/wiki/index.php?title=Special:RecentChanges&amp;feed=atom" />
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Git_Branch_Management skin-monobook action-edit">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">View source for Git Branch Management</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Net-SNMP Wiki</div>
					<div id="contentSub">‚Üê <a href="http://www.net-snmp.org/wiki/index.php/Git_Branch_Management" title="Git Branch Management">Git Branch Management</a></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text"><p>You do not have permission to edit this page, for the following reason:
</p>
<div class="permissions-errors">
<p>The action you have requested is limited to users in the group: <a href="http://www.net-snmp.org/wiki/index.php?title=Net-SNMP_Wiki:Users&amp;action=edit&amp;redlink=1" class="new" title="Net-SNMP Wiki:Users (page does not exist)">Users</a>.
</p>
</div>
<hr />
<p>You can view and copy the source of this page.
</p><textarea readonly="" accesskey="," id="wpTextbox1" cols="80" rows="25" style="" lang="en" dir="ltr" name="wpTextbox1">Net-SNMP has a number of scripts or shell functions which help manage a git-repo.  Specifically, we have a bunch of tools that help test [[Patches|patches]], apply patches and perform upward merges based on our [[Git Workflow]].  It augments the more day-to-day [[Git For Developers]] with detailed project-management issues.

== Getting Started ==

The bash aliases require that you source the local/gittools/shell-functions in order to get started:

  # '''. ./{{code|local/gittools/shell-functions}}'''

Once this is done, the rest of the commands on this page will work.

== Patch Management ==

Our [[Git Workflow]] states that patches should be applied to the lowest branch possible.  IE, if you have a bug fix for nearly every version it should be applied to the lowest current supported version branch.  EG, V5-4-patches.  But which branch will it apply against cleanly??  How do I do this quickly?  We have an answer for you:

''Note: all these routines require a clean source tree to start, and will warn you if you have modified files in the tree''

=== nspatchtry ===

The '''nspatchtest''' command can be used to apply a patch to each (currently supported) branch in the tree to see which it will successfully apply to.  This is much faster than figuring this out by hand.  It takes ''patch'' arguments to apply the patch with.  The -i switch is required to specify where the patch file is located.

  # '''nspatchtry -p 1 -i /tmp/thepatch'''
  ::: Net-SNMP: checking out and applying patch in V5-4-patches
  Switched to branch 'V5-4-patches'
  Your branch is ahead of 'origin/V5-4-patches' by 5 commits.
  ::: Net-SNMP: Appling patch
  patching file net-snmp/README.snmpv3
  ::: Net-SNMP: Patch succeeded on V5-4-patches
  ::: Net-SNMP: cleaning source tree
  ::: Net-SNMP: checking out and applying patch in V5-5-patches
  Switched to branch 'V5-5-patches'
  Your branch is ahead of 'origin/V5-5-patches' by 12824 commits.
  ::: Net-SNMP: Appling patch
  patching file net-snmp/README.snmpv3
  ::: Net-SNMP: Patch succeeded on V5-5-patches
  ::: Net-SNMP: cleaning source tree
  ::: Net-SNMP: checking out and applying patch in V5-6-patches
  Switched to branch 'V5-6-patches'
  Your branch is ahead of 'origin/V5-6-patches' by 25983 commits.
  ::: Net-SNMP: Appling patch
  patching file net-snmp/README.snmpv3
  ::: Net-SNMP: Patch succeeded on V5-6-patches
  ::: Net-SNMP: cleaning source tree
  ::: Net-SNMP: checking out and applying patch in master
  Switched to branch 'master'
  Your branch is ahead of 'origin/master' by 14786 commits.
  ::: Net-SNMP: Appling patch
  patching file net-snmp/README.snmpv3
  ::: Net-SNMP: Patch succeeded on master
  ::: Net-SNMP: cleaning source tree
  
  Patch application results:
    Success:  V5-4-patches V5-5-patches V5-6-patches master
       Fail: 

Note the important ending: my patch succeeded against all those
branches.

=== nspatchapply ===

Now that we know where the patch should be applied, actually applying
it is very simple.  Simply call the ''nspatchapply'' script, which:

# checks out the earliest branch that worked with ''nspatchtry''
# applies the patch
# runs ''git diff'' so you can make sure it looks ok
# asks you if it looks ok and if so:
# runs ''git commit'' on the results, with any arguments you pass it, to commit the results.

  # '''nspatchapply -m "applying the wonderful patch.  Isn't it pretty?"'''
  ::: Net-SNMP: Checking out V5-4-patches
  Switched to branch 'V5-4-patches'
  Your branch is ahead of 'origin/V5-4-patches' by 5 commits.
  ::: Net-SNMP: applying the patch -p 1 -i /tmp/thepatch
  patching file net-snmp/README.snmpv3
  diff --git a/net-snmp/README.snmpv3 b/net-snmp/README.snmpv3
  index 263c955..8294035 100644
  --- a/net-snmp/README.snmpv3
  +++ b/net-snmp/README.snmpv3
  @@ -1,4 +1,4 @@
  -README.snmpv3
  +README.snmpv3foo
   -------------
   How to setup SNMPv3, a very brief document for Dave to elaborate and
   do a better job on since I suck at writing documentation and he
  
  commit the results to V5-4-patches? [y/n] '''y'''
  [V5-4-patches 102bde5] applying the wonderful patch.  Isn't it pretty?
   1 files changed, 1 insertions(+), 1 deletions(-)

Done!  Wasn't that easy?

If you already have changes on one branch and need to move them, you might read the [[Moving changes on a Git branch]] web page for moving already committed changes.

== Git Repository Management ==

Once you have bug-fix patches sprinkled about the various trees, how in the world do you get them all up into the trunk where you want to do your new spiffy feature development in a bug-free environment?

=== nsrollup ===

The '''nsrollup''' bash function performs the following tasks on a clean tree:

# performs a ''git fetch --all'' to ensure your branches are up to date
# checks out each branch
# rebases any existing work on top of the newer remote branch
# merges the direct previous version into it (eg, it'll roll V5-4-patches into V5-5-patches)
# lets you know about conflicts that you need to resolve

  # nsrollup
  ::: Net-SNMP: Pulling all upstream branches
  Fetching origin
  Already up-to-date.
  ::: Net-SNMP: checking out V5-5-patches
  Switched to branch 'V5-5-patches'
  Your branch is ahead of 'origin/V5-5-patches' by 12824 commits.
  ::: Net-SNMP: merging V5-4-patches into V5-5-patches
  Merge made by recursive.
   net-snmp/README.snmpv3 |    2 +-
   net-snmp/README.tru64  |    4 ++++
   2 files changed, 5 insertions(+), 1 deletions(-)
  ::: Net-SNMP: checking out V5-6-patches
  Switched to branch 'V5-6-patches'
  Your branch is ahead of 'origin/V5-6-patches' by 25983 commits.
  ::: Net-SNMP: merging V5-5-patches into V5-6-patches
  Auto-merging net-snmp/README.snmpv3
  Auto-merging net-snmp/README.tru64
  Merge made by recursive.
   dist/release           |    2 +-
   net-snmp/README.snmpv3 |    2 +-
   net-snmp/README.tru64  |    2 ++
   3 files changed, 4 insertions(+), 2 deletions(-)
  ::: Net-SNMP: checking out master
  Switched to branch 'master'
  Your branch is ahead of 'origin/master' by 14786 commits.
  ::: Net-SNMP: merging V5-6-patches into master
  Merge made by recursive.
   dist/release           |    2 +-
   net-snmp/README.snmpv3 |    2 +-
   net-snmp/README.tru64  |    2 ++
   3 files changed, 4 insertions(+), 2 deletions(-)

  -------------------------------
  Updated the following branches:
     V5-5-patches V5-6-patches master

==== Stopping Merging During Release-Candidates ====

Our development policy says that during the release candidate series, all patches must be voted on in the -coders list.  Thus, it's not appropriate for these to be automatically rolled upward, as that's the job of the release engineer for that release to do.  Thus, if a ''dist/release'' file exists and it contains a branch name followed by a magical 'rc' keyword, this branch will be excluded from the merging.  EG:

  V5-6-patches rc

Will cause it to be ignored for merging.  Changes in V5-6-patches will still be rolled into V5-7-patches, though (which will often include changes to the ''dist/release'' file itself; but that's ok.  It can list multiple releases if need be).

=== Checking the pretty results tree ===

The [[gitk]] tool is highly useful (with the --all switch) for showing the resulting prettiness that you just created.  For example, in the above examples it produced a bunch of merges that are shown graphically as follows:

[[Image:gitkexample.jpg]]

[[Category:Git]]

== Building and Testing ==

[[Category:Git]]
</textarea><div class="templatesUsed"><div class="mw-templatesUsedExplanation"><p>Template used on this page:
</p></div><ul>
<li><a href="http://www.net-snmp.org/wiki/index.php/Template:Code" title="Template:Code">Template:Code</a> (<a href="http://www.net-snmp.org/wiki/index.php?title=Template:Code&amp;action=edit" title="Template:Code">view source</a>) </li></ul></div><p id="mw-returnto">Return to <a href="http://www.net-snmp.org/wiki/index.php/Git_Branch_Management" title="Git Branch Management">Git Branch Management</a>.</p>
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://www.net-snmp.org/wiki/index.php/Git_Branch_Management">http://www.net-snmp.org/wiki/index.php/Git_Branch_Management</a>"</div>
					<div id='catlinks' class='catlinks catlinks-allhidden'></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-main" class="selected"><a href="http://www.net-snmp.org/wiki/index.php/Git_Branch_Management" title="View the content page [c]" accesskey="c">Page</a></li>
				<li id="ca-talk" class="new"><a href="http://www.net-snmp.org/wiki/index.php?title=Talk:Git_Branch_Management&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-viewsource" class="selected"><a href="http://www.net-snmp.org/wiki/index.php?title=Git_Branch_Management&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
				<li id="ca-history"><a href="http://www.net-snmp.org/wiki/index.php?title=Git_Branch_Management&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="http://www.net-snmp.org/wiki/index.php?title=Special:UserLogin&amp;returnto=Git+Branch+Management&amp;returntoquery=action%3Dedit&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="http://www.net-snmp.org/wiki/index.php?title=Special:UserLogin&amp;returnto=Git+Branch+Management&amp;returntoquery=action%3Dedit" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="http://www.net-snmp.org/wiki/index.php/Main_Page" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-project" role="navigation">
		<h3>project</h3>
		<div class='pBody'>
							<ul>
											<li id="n-Web-Site"><a href="http://www.net-snmp.org/" rel="nofollow">Web Site</a></li>
											<li id="n-Wiki"><a href="http://www.net-snmp.org/wiki/index.php/Main_Page">Wiki</a></li>
											<li id="n-Download"><a href="http://www.net-snmp.org/download.html" rel="nofollow">download</a></li>
											<li id="n-Mailing-Lists"><a href="http://www.net-snmp.org/support/mailinglists.html" rel="nofollow">Mailing Lists</a></li>
											<li id="n-Bug-Reports"><a href="http://www.net-snmp.org/support/bugreports.html" rel="nofollow">Bug Reports</a></li>
											<li id="n-Patches"><a href="http://www.net-snmp.org/support/patches.html" rel="nofollow">Patches</a></li>
									</ul>
					</div>
		</div>
		<div class="generated-sidebar portlet" id="p-documentation" role="navigation">
		<h3>documentation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-Tutorials"><a href="http://www.net-snmp.org/wiki/index.php/Tutorials">Tutorials</a></li>
											<li id="n-FAQ"><a href="http://www.net-snmp.org/wiki/index.php/FAQ">FAQ</a></li>
											<li id="n-Good-Answers"><a href="http://www.net-snmp.org/wiki/index.php/Category:GoodAnswer">Good Answers</a></li>
											<li id="n-Manual-Pages"><a href="http://www.net-snmp.org/man" rel="nofollow">Manual Pages</a></li>
											<li id="n-Tools"><a href="http://www.net-snmp.org/wiki/index.php/Category:Tools">Tools</a></li>
									</ul>
					</div>
		</div>
		<div class="generated-sidebar portlet" id="p-wiki" role="navigation">
		<h3>wiki</h3>
		<div class='pBody'>
							<ul>
											<li id="n-recentchanges"><a href="http://www.net-snmp.org/wiki/index.php/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="http://www.net-snmp.org/wiki/index.php/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
											<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="http://www.net-snmp.org/wiki/index.php" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Net-SNMP Wiki [f]" accesskey="f" id="searchInput" />
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="http://www.net-snmp.org/wiki/index.php/Special:WhatLinksHere/Git_Branch_Management" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="http://www.net-snmp.org/wiki/index.php/Special:RecentChangesLinked/Git_Branch_Management" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="http://www.net-snmp.org/wiki/index.php/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-info"><a href="http://www.net-snmp.org/wiki/index.php?title=Git_Branch_Management&amp;action=info" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-poweredbyico">
									<a href="http://www.mediawiki.org/"><img src="http://www.net-snmp.org/wiki/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/wiki/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /wiki/resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a>
							</div>
					<ul id="f-list">
									<li id="privacy"><a href="http://www.net-snmp.org/wiki/index.php/Net-SNMP_Wiki:Privacy_policy" title="Net-SNMP Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="http://www.net-snmp.org/wiki/index.php/Net-SNMP_Wiki:About" title="Net-SNMP Wiki:About">About Net-SNMP Wiki</a></li>
									<li id="disclaimer"><a href="http://www.net-snmp.org/wiki/index.php/Net-SNMP_Wiki:General_disclaimer" title="Net-SNMP Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.state({"user":"ready","user.groups":"ready"});mw.loader.load(["mediawiki.action.edit.collapsibleFooter","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"]);
} );</script><script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgBackendResponseTime":144});
} );</script></body>
<!-- Mirrored from www.net-snmp.org/wiki/index.php?title=Git_Branch_Management&action=edit by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 May 2024 19:28:13 GMT -->
</html>
