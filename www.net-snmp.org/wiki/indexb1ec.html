

<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from www.net-snmp.org/wiki/index.php?title=Testing&action=edit by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 May 2024 19:24:00 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>View source for Testing - Net-SNMP Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":0,"wgPageName":"Testing","wgTitle":"Testing","wgCurRevisionId":4955,"wgRevisionId":0,"wgArticleId":2117,"wgIsArticle":!1,"wgIsRedirect":!1,"wgAction":"edit","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":!0,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Testing","wgRelevantArticleId":2117,"wgIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits"]);
} );</script>
<link rel="stylesheet" href="load34a1.css?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook" />
<!--[if IE 6]><link rel="stylesheet" href="/wiki/skins/MonoBook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/wiki/skins/MonoBook/IE70Fixes.css?303" media="screen" /><![endif]-->
<meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}</style>
<script async="" src="load3a95.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook"></script>
<meta name="generator" content="MediaWiki 1.26.3" />
<meta name="robots" content="noindex,nofollow" />
<link rel="shortcut icon" href="http://www.net-snmp.org/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="http://www.net-snmp.org/wiki/opensearch_desc.php" title="Net-SNMP Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://www.net-snmp.org/wiki/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Net-SNMP Wiki Atom feed" href="http://www.net-snmp.org/wiki/index.php?title=Special:RecentChanges&amp;feed=atom" />
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Testing skin-monobook action-edit">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">View source for Testing</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Net-SNMP Wiki</div>
					<div id="contentSub">‚Üê <a href="http://www.net-snmp.org/wiki/index.php/Testing" title="Testing">Testing</a></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text"><p>You do not have permission to edit this page, for the following reason:
</p>
<div class="permissions-errors">
<p>The action you have requested is limited to users in the group: <a href="http://www.net-snmp.org/wiki/index.php?title=Net-SNMP_Wiki:Users&amp;action=edit&amp;redlink=1" class="new" title="Net-SNMP Wiki:Users (page does not exist)">Users</a>.
</p>
</div>
<hr />
<p>You can view and copy the source of this page.
</p><textarea readonly="" accesskey="," id="wpTextbox1" cols="80" rows="25" style="" lang="en" dir="ltr" name="wpTextbox1">Net-SNMP comes with a testing suite that is simple to use, and fairly simple to write new tests for.  The instructions below describe both how to the suite and how to write new tests for it.

== Using the Test System ==

The simplest way to run the tests is to simply:

 # cd testing
 # make test

And watch the output. If you built outside of the source tree, then you need to set the &lt;code>builddir&lt;/code> environment variable to the path to your build directory.

=== Notes for version 5.5 and below ===

'''make test''' really just invokes the "RUNTESTS" script.  See the ''RUNTESTS -h'' output for help

Everything below this point applies primarily to version 5.6 and above.  Although the "simple" tests described below still work and thus it's still possible to write new tests using that format for version prior to 5.6.

Everything below is really talking about the newer test suite in 5.6+.

=== Notes for version 5.6 and above ===

{{require|5.6}}

In version 5.6 the testing suite was rewritten to provide:

* Logical grouping of tests
* The ability to generate compiled tests
* To make use of the [[wiki:PerlTap]] (TAP)

'''make test''' is still the simple way to run the default set of tests.  This should work on every platform, although platforms with newer versions of [[perl]] will get increased levels of support.  Platforms without perl at all can't take advantage of the TAP collection process and the output will thus be very verbose.

'''make test''' will still run the ''default'' set of tests for you, now using the ''RUNFULLTESTS'' script.  However, there are more tests available that can be run in addition to the complete set.  The test ''groups'' are located in individual directories in the ''testing/fulltests'' directory.  The one exception is the ''support'' directory which merely contains supporting files for the other directories.

==== Running a particular test ====

To run a particular group use:

  # '''cd testing'''
  # '''./RUNFULLTESTS -g ''groupname'''''

Where ''groupname'' is the directory name you wish to execute the tests from.  For example:

  # '''./RUNFULLTESTS -g unit-tests'''

will run the unit-tests for the libraries.

To run a particular test, use RUNTESTS:

  # '''./RUNFULLTESTS -r 002'''

Note that this is a regexp and will match and test in the group with 002 in the filename (and may match and run multiple tests).  Obliviously, other more powerful regexps can be used too.  Use the -g switch too if you need to run a particular test in a non-default test group.

== Available Test Groups ==

The following list describes the test groups available in the latest version of Net-SNMP.  These will only be available from 5.6 onward, and as Net-SNMP development continues some may only be available in the more recent versions:

{| cellpadding=1 cellspacing=0 border=1 style="margin-left: 2em;"
|- bgcolor="#ddd"
! Test Group
! Description
|-
| all
| A special keyword to run every available test group
|-
| default
| The default list of tests to run.  This group is expected to work even with older versions of perl.  The other groups frequently require Newer versions of perl (5.8+).
|-
| unit-tests
| Runs basic unit tests for the libraries.  These tests generally involve compiling a simple c-application that execercises various aspects of the Net-SNMP C Libraries.
|-
| transports
| Tests each available transport type for its ability to send and receive data.  Simple SNMP messages are sent from a client to an agent and back using each available transport type.  Will likely require a properly setup network (eg, a working IPv6 interface if you compiled in IPv6 support).
|-
| tls
| Extensive tests of the TLS and DTLS transports to ensure they're functioning and all the features are working
|-
| perl
| Simple tests of the perl module and it's ability to send and receive data
|-
|}

== Architecture of the Testing System ==

The Net-SNMP testing infrastructure is divided into parts:

* The RUNFULLTESTS program, which is a harness for knowing how to execute individual tests and groups of tests.
* Directories of tests that form ''groups''
* Individual tests that are written in the form of a particular ''test style''
* Supporting files that know how to build and run particular ''test style''s.

=== RUNFULLTESTS ===

Internally to RUNFULLTESTS it:

# examines the list of arguments for which test groups should be run
# optionally filters that list further because of regexps passed on the command line via the -r switch
# for each test:
## determines the ''test style'' of the test
## looks for a supporting ''_build'' rule and executes it (if found) with the name of the test file.  It also records the last line of the output as the new test file to pass to the _run routine.
## looks for a supporting ''_run'' rule and executes it with the name of the test to run and collects it output as TAP output
## If no ''_run'' system was found, it executes the file itself and collects the output as TAP output (ie, it must a stand alone script)
# Displays a summary of the results from all the tests

==== _build and _run components ====

Test ''style types'' are found by examine the file name of the test itself.  The style type is always the last suffix to the file following the last ''_'' (underscore) character.  For example the test ''fulltests/default/T001snmpv1get_simple'' has a style type of ''simple''.  Suffixes beyond the style are also allowed, eg "_simple.c" is a valid ending, as used in the ''fulltests/unit-tests/T001defaultstore_clib.c'' test.

Thus, ''RUNFULLTESTS'' will look in the ''fulltests/default'' directory for a ''simple_build'' and ''simple_run'' script.  If not found there, it will also look in the ''fulltests/support'' directory as well.  If either or both are found, they're executed according to the above steps.

== Existing Test Styles ==

=== simple ===

The oldest style was written during the period where SNMPv3 support was added to the Net-SNMP project, back near UCD-SNMP version 4.0.  This style has proven to be very useful and easy to use (but hard for the developers to maintain the internal support for it).

''simple'' tests are written in sh or bash and have a few mandatory components and special macros to use.  See the ''fulltests/default/T001snmpv1get_simple'' for a fairly simple example.

=== clib ===

''clib'' tests are designed to execute parts of the Net-SNMP [[libnetsnmp]] library, which is the true base of all the Net-SNMP software components.  The file should be a simple [[C]] file with no wrapping function.  There are a number of useful C macros that can be used to test and report errors (defined in include/net-snmp/library/testing.h):

* PLAN: If you know the number of tests you're going to run, call PLAN near the top to list the number.  This helps the output be prettier.
  PLAN(20);

* OKF: checks that a condititon is true and includes a test description
  OKF(myFunc() == 1, "myFunc() should always return 1.);

* OKF: checks a condition with a formated description string:
  int result = myFunc();
  OKF(result == 1, ("myFunc() should always return 1.  It returned %d", result));

Example file: fulltests/unit-tests/T001defaultstore_clib.c

=== agentlib ===

This ''style'' is nearly identical to the ''clib'' style, but also links the resulting executable against the libnetsnmpagent library for testing functions in it.

Example file: fulltests/unit-tests/T006snmp_handler_registration_cagentlib.c

=== capp ===

A C-app file must a complete self contained [[C]] file.  It's compiled and linked with the [[libnetsnmp]] library and executed and should produce TAP output (if you include the net-snmp/library/testing.h file you can use the above macros).

Example file: fulltests/snmpv3/T050etimetest_capp.c

== Developer Notes ==
See notes on the [[Test_Scripts]] page.
</textarea><div class="templatesUsed"><div class="mw-templatesUsedExplanation"><p>Template used on this page:
</p></div><ul>
<li><a href="http://www.net-snmp.org/wiki/index.php/Template:Require" title="Template:Require">Template:Require</a> (<a href="http://www.net-snmp.org/wiki/index.php?title=Template:Require&amp;action=edit" title="Template:Require">view source</a>) </li></ul></div><p id="mw-returnto">Return to <a href="http://www.net-snmp.org/wiki/index.php/Testing" title="Testing">Testing</a>.</p>
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://www.net-snmp.org/wiki/index.php/Testing">http://www.net-snmp.org/wiki/index.php/Testing</a>"</div>
					<div id='catlinks' class='catlinks catlinks-allhidden'></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-main" class="selected"><a href="http://www.net-snmp.org/wiki/index.php/Testing" title="View the content page [c]" accesskey="c">Page</a></li>
				<li id="ca-talk" class="new"><a href="http://www.net-snmp.org/wiki/index.php?title=Talk:Testing&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-viewsource" class="selected"><a href="http://www.net-snmp.org/wiki/index.php?title=Testing&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
				<li id="ca-history"><a href="http://www.net-snmp.org/wiki/index.php?title=Testing&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="http://www.net-snmp.org/wiki/index.php?title=Special:UserLogin&amp;returnto=Testing&amp;returntoquery=action%3Dedit&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="http://www.net-snmp.org/wiki/index.php?title=Special:UserLogin&amp;returnto=Testing&amp;returntoquery=action%3Dedit" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="http://www.net-snmp.org/wiki/index.php/Main_Page" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-project" role="navigation">
		<h3>project</h3>
		<div class='pBody'>
							<ul>
											<li id="n-Web-Site"><a href="http://www.net-snmp.org/" rel="nofollow">Web Site</a></li>
											<li id="n-Wiki"><a href="http://www.net-snmp.org/wiki/index.php/Main_Page">Wiki</a></li>
											<li id="n-Download"><a href="http://www.net-snmp.org/download.html" rel="nofollow">download</a></li>
											<li id="n-Mailing-Lists"><a href="http://www.net-snmp.org/support/mailinglists.html" rel="nofollow">Mailing Lists</a></li>
											<li id="n-Bug-Reports"><a href="http://www.net-snmp.org/support/bugreports.html" rel="nofollow">Bug Reports</a></li>
											<li id="n-Patches"><a href="http://www.net-snmp.org/support/patches.html" rel="nofollow">Patches</a></li>
									</ul>
					</div>
		</div>
		<div class="generated-sidebar portlet" id="p-documentation" role="navigation">
		<h3>documentation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-Tutorials"><a href="http://www.net-snmp.org/wiki/index.php/Tutorials">Tutorials</a></li>
											<li id="n-FAQ"><a href="http://www.net-snmp.org/wiki/index.php/FAQ">FAQ</a></li>
											<li id="n-Good-Answers"><a href="http://www.net-snmp.org/wiki/index.php/Category:GoodAnswer">Good Answers</a></li>
											<li id="n-Manual-Pages"><a href="http://www.net-snmp.org/man" rel="nofollow">Manual Pages</a></li>
											<li id="n-Tools"><a href="http://www.net-snmp.org/wiki/index.php/Category:Tools">Tools</a></li>
									</ul>
					</div>
		</div>
		<div class="generated-sidebar portlet" id="p-wiki" role="navigation">
		<h3>wiki</h3>
		<div class='pBody'>
							<ul>
											<li id="n-recentchanges"><a href="http://www.net-snmp.org/wiki/index.php/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="http://www.net-snmp.org/wiki/index.php/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
											<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="http://www.net-snmp.org/wiki/index.php" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Net-SNMP Wiki [f]" accesskey="f" id="searchInput" />
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="http://www.net-snmp.org/wiki/index.php/Special:WhatLinksHere/Testing" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="http://www.net-snmp.org/wiki/index.php/Special:RecentChangesLinked/Testing" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="http://www.net-snmp.org/wiki/index.php/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-info"><a href="http://www.net-snmp.org/wiki/index.php?title=Testing&amp;action=info" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-poweredbyico">
									<a href="http://www.mediawiki.org/"><img src="http://www.net-snmp.org/wiki/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/wiki/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /wiki/resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a>
							</div>
					<ul id="f-list">
									<li id="privacy"><a href="http://www.net-snmp.org/wiki/index.php/Net-SNMP_Wiki:Privacy_policy" title="Net-SNMP Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="http://www.net-snmp.org/wiki/index.php/Net-SNMP_Wiki:About" title="Net-SNMP Wiki:About">About Net-SNMP Wiki</a></li>
									<li id="disclaimer"><a href="http://www.net-snmp.org/wiki/index.php/Net-SNMP_Wiki:General_disclaimer" title="Net-SNMP Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.state({"user":"ready","user.groups":"ready"});mw.loader.load(["mediawiki.action.edit.collapsibleFooter","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"]);
} );</script><script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgBackendResponseTime":121});
} );</script></body>
<!-- Mirrored from www.net-snmp.org/wiki/index.php?title=Testing&action=edit by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 May 2024 19:24:00 GMT -->
</html>
