

<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from www.net-snmp.org/wiki/index.php?title=FAQ:Coding_12&oldid=4022 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 May 2024 19:20:49 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>FAQ:Coding 12 - Net-SNMP Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":0,"wgPageName":"FAQ:Coding_12","wgTitle":"FAQ:Coding 12","wgCurRevisionId":4022,"wgRevisionId":4022,"wgArticleId":1687,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":!1,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"FAQ:Coding_12","wgRelevantArticleId":1687,"wgIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits"]);
} );</script>
<link rel="stylesheet" href="load34a1.css?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook" />
<!--[if IE 6]><link rel="stylesheet" href="/wiki/skins/MonoBook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/wiki/skins/MonoBook/IE70Fixes.css?303" media="screen" /><![endif]-->
<meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}</style>
<script async="" src="load3a95.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook"></script>
<meta name="generator" content="MediaWiki 1.26.3" />
<meta name="robots" content="noindex,nofollow" />
<link rel="shortcut icon" href="http://www.net-snmp.org/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="http://www.net-snmp.org/wiki/opensearch_desc.php" title="Net-SNMP Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://www.net-snmp.org/wiki/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Net-SNMP Wiki Atom feed" href="http://www.net-snmp.org/wiki/index.php?title=Special:RecentChanges&amp;feed=atom" />
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-FAQ_Coding_12 skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">FAQ:Coding 12</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Net-SNMP Wiki</div>
					<div id="contentSub"><div id="mw-revision-info">Revision as of 20:56, 20 July 2009 by <a href="http://www.net-snmp.org/wiki/index.php/User:Dts12" title="User:Dts12" class="mw-userlink">Dts12</a> <span class="mw-usertoollinks">(<a href="http://www.net-snmp.org/wiki/index.php?title=User_talk:Dts12&amp;action=edit&amp;redlink=1" class="new" title="User talk:Dts12 (page does not exist)">Talk</a> | <a href="http://www.net-snmp.org/wiki/index.php/Special:Contributions/Dts12" title="Special:Contributions/Dts12">contribs</a>)</span> <span class="comment">(Latest FAQ revision - preparing for 5.5 release)</span></div><br />
				<div id="mw-revision-nav">(<a href="http://www.net-snmp.org/wiki/index.php?title=FAQ:Coding_12&amp;diff=prev&amp;oldid=4022" title="FAQ:Coding 12">diff</a>) <a href="http://www.net-snmp.org/wiki/index.php?title=FAQ:Coding_12&amp;direction=prev&amp;oldid=4022" title="FAQ:Coding 12">← Older revision</a> | Latest revision (diff) | Newer revision → (diff)</div></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><h1><span class="mw-headline" id="Why_doesn.27t_my_new_MIB_module_report_anything.3F">Why doesn't my new MIB module report anything?</span></h1>
<p>There are probably four main reasons why a new MIB module isn't working.
Either it hasn't been included in the running agent,  the code is present
but hasn't been initialised,  the module has been initialised but the
handler isn't being called, or there's a problem with the module code itself.
</p><p>To check whether the code files are being compiled, the easiest approach is
simply to look at the directory where the code is located.  When the agent is
compiled, this should produce .o files (and probably .lo files) corresponding
to the C code files for this module.  Alternatively, run <code>nm</code> (or <code>strings</code>)
on the MIB module library (<code>libnetsnmpmibs</code>), and look for the names of the
initialisation routines or handlers (or the text of any messages displayed by
the module code).
</p><p>One other thing to check is whether you have multiple copies of the software
installed on the system.  This is a particular problem when compiling from
source (to include your new module), without first removing any vendor-supplied
version of the agent (which won't include this new code).
</p><p><br />
Assuming that you have confirmed that the module code is present in the agent,
the next step is to check whether the initialisation routine is being called
to register the MIB objects.  The simplest way to do this is to include a
suitable debugging statement within the initialisation routine, and start
the agent with the corresponding '<code>-D<i>token</i></code>'.  Alternatively, try walking the
<code>nsModuleName</code> column object, and look for mention of the new MIB module.
</p><p><br />
Assuming the module has been registered, the next step is to check whether
the handler is being called, when the agent receives a suitable SNMP request.
Again, the simplest way to do this is to include debugging statements within
the handler routine, and start the agent with the corresponding '<code>-D<i>token</i></code>'.
Then issue an <code>snmpget</code> request for an instance within the new MIB module.
(This command is preferable to the usual <code>snmpwalk</code> command, as it is more
closely focused on the MIB module in question).
</p><p>If this indicates that the handler routine isn't being called, then there are
two main likely causes.  Firstly, check the access control settings.  If these
are configured to block access to this portion of the OID tree, then the MIB
handler will never be called.  Secondly, several of the table helpers are
designed to know which rows of the table are valid, and will call the main
MIB handler with information about the relevant row.  If the requested row is
not valid (or the table is empty), then the handler will not be called.
</p><p><br />
Finally, if the handler <i>is</i> being called, but is still not returning any
information, then the cause probably lies with your MIB module code.  In which
case, it's really up to you to find the problem and fix it!  Either activate
any debugging code that you have included within the handler routine, or run
the agent under a source code debugger, and step through the handler processing.
In either case, it's much easier to debug these problems when processing an
<code>snmpget</code> request, rather than <code>snmpgetnext</code> or <code>snmpwalk</code>.
</p><p>Remember that <code>mib2c</code> simply generates template code for your MIB module.
It's up to you to fill in the details, to report the actual information from
whatever underlying subsystem is being monitored.   Mib2c cannot help with
the semantics of the MIB module - it's purely there to provide an initial
code framework, based on the <i>syntax</i> of the MIB module objects.
</p>
<pre>   <a href="http://www.net-snmp.org/wiki/index.php/FAQ:Coding" title="FAQ:Coding">FAQ:Coding</a>
   
</pre>
<ol><li> <a href="http://www.net-snmp.org/wiki/index.php/FAQ:Coding_01" title="FAQ:Coding 01">How do I write C code to integrate with the agent?</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/FAQ:Coding_02" title="FAQ:Coding 02">How does the agent fetch the value of a MIB variable from the system?</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/FAQ:Coding_03" title="FAQ:Coding 03">Mib2c complains about a missing "mib reference" - what does this mean?</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/FAQ:Coding_04" title="FAQ:Coding 04">Mib2c complains about not having a "valid OID" - what does this mean?</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/FAQ:Coding_05" title="FAQ:Coding 05">Why doesn't mib2c like the MIB file I'm giving it?</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/FAQ:Coding_06" title="FAQ:Coding 06">Mib2c ignores my MIB and generates a pair of 'mib-2' code files.  Why?</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/FAQ:Coding_07" title="FAQ:Coding 07">What's the difference between the various mib2c configuration files?</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/FAQ:Coding_08" title="FAQ:Coding 08">Which mib2c configuration file should I use?</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/FAQ:Coding_09" title="FAQ:Coding 09">How can I have mib2c generate code for both scalars and tables?</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/FAQ:Coding_10" title="FAQ:Coding 10">Are there any examples, or documentation for generating MIB modules?</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/FAQ:Coding_11" title="FAQ:Coding 11">Where should I put the files produced by 'mib2c'?</a></li>
<li> <strong class="selflink">Why doesn't my new MIB module report anything?</strong></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/FAQ:Coding_13" title="FAQ:Coding 13">Why does the iterator call my get_{first,next} routines so often?</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/FAQ:Coding_14" title="FAQ:Coding 14">How can I get the agent to generate a trap (or inform)?</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/FAQ:Coding_15" title="FAQ:Coding 15">How can I get an AgentX sub-agent to generate a trap (or inform)?</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/FAQ:Coding_16" title="FAQ:Coding 16">How can I get the agent to send an SNMPv1 (or SNMPv2c) trap?</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/FAQ:Coding_17" title="FAQ:Coding 17">How can I get the agent to include varbinds with an SNMPv1 trap?</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/FAQ:Coding_18" title="FAQ:Coding 18">How can I get the agent to send an SNMPv1 enterprise-specific trap?</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/FAQ:Coding_19" title="FAQ:Coding 19">How can I get the agent to send an SNMPv3 trap (or inform)?</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/FAQ:Coding_20" title="FAQ:Coding 20">Why does calling 'send_v2trap' generate an SNMPv1 trap (or vice versa)?</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/FAQ:Coding_21" title="FAQ:Coding 21">How can I register a MIB module in a different (SNMPv3) context?</a></li></ol>

<!-- 
NewPP limit report
Cached time: 20240514185546
Cache expiry: 0
Dynamic content: true
CPU time usage: 0.011 seconds
Real time usage: 0.015 seconds
Preprocessor visited node count: 6/1000000
Preprocessor generated node count: 34/1000000
Post‐expand include size: 5336/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    6.632      1 - -total
 52.08%    3.454      1 - Template:FAQ:Coding_14
 45.15%    2.994      1 - Template:FAQ:Coding
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://www.net-snmp.org/wiki/index.php?title=FAQ:Coding_12&amp;oldid=4022">http://www.net-snmp.org/wiki/index.php?title=FAQ:Coding_12&amp;oldid=4022</a>"</div>
					<div id='catlinks' class='catlinks catlinks-allhidden'></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-main" class="selected"><a href="http://www.net-snmp.org/wiki/index.php/FAQ:Coding_12" title="View the content page [c]" accesskey="c">Page</a></li>
				<li id="ca-talk" class="new"><a href="http://www.net-snmp.org/wiki/index.php?title=Talk:FAQ:Coding_12&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-viewsource"><a href="http://www.net-snmp.org/wiki/index.php?title=FAQ:Coding_12&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
				<li id="ca-history"><a href="http://www.net-snmp.org/wiki/index.php?title=FAQ:Coding_12&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="http://www.net-snmp.org/wiki/index.php?title=Special:UserLogin&amp;returnto=FAQ%3ACoding+12&amp;returntoquery=oldid%3D4022&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="http://www.net-snmp.org/wiki/index.php?title=Special:UserLogin&amp;returnto=FAQ%3ACoding+12&amp;returntoquery=oldid%3D4022" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="http://www.net-snmp.org/wiki/index.php/Main_Page" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-project" role="navigation">
		<h3>project</h3>
		<div class='pBody'>
							<ul>
											<li id="n-Web-Site"><a href="http://www.net-snmp.org/" rel="nofollow">Web Site</a></li>
											<li id="n-Wiki"><a href="http://www.net-snmp.org/wiki/index.php/Main_Page">Wiki</a></li>
											<li id="n-Download"><a href="http://www.net-snmp.org/download.html" rel="nofollow">download</a></li>
											<li id="n-Mailing-Lists"><a href="http://www.net-snmp.org/support/mailinglists.html" rel="nofollow">Mailing Lists</a></li>
											<li id="n-Bug-Reports"><a href="http://www.net-snmp.org/support/bugreports.html" rel="nofollow">Bug Reports</a></li>
											<li id="n-Patches"><a href="http://www.net-snmp.org/support/patches.html" rel="nofollow">Patches</a></li>
									</ul>
					</div>
		</div>
		<div class="generated-sidebar portlet" id="p-documentation" role="navigation">
		<h3>documentation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-Tutorials"><a href="http://www.net-snmp.org/wiki/index.php/Tutorials">Tutorials</a></li>
											<li id="n-FAQ"><a href="http://www.net-snmp.org/wiki/index.php/FAQ">FAQ</a></li>
											<li id="n-Good-Answers"><a href="http://www.net-snmp.org/wiki/index.php/Category:GoodAnswer">Good Answers</a></li>
											<li id="n-Manual-Pages"><a href="http://www.net-snmp.org/man" rel="nofollow">Manual Pages</a></li>
											<li id="n-Tools"><a href="http://www.net-snmp.org/wiki/index.php/Category:Tools">Tools</a></li>
									</ul>
					</div>
		</div>
		<div class="generated-sidebar portlet" id="p-wiki" role="navigation">
		<h3>wiki</h3>
		<div class='pBody'>
							<ul>
											<li id="n-recentchanges"><a href="http://www.net-snmp.org/wiki/index.php/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="http://www.net-snmp.org/wiki/index.php/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
											<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="http://www.net-snmp.org/wiki/index.php" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Net-SNMP Wiki [f]" accesskey="f" id="searchInput" />
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="http://www.net-snmp.org/wiki/index.php/Special:WhatLinksHere/FAQ:Coding_12" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="http://www.net-snmp.org/wiki/index.php/Special:RecentChangesLinked/FAQ:Coding_12" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="http://www.net-snmp.org/wiki/index.php/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-print"><a href="http://www.net-snmp.org/wiki/index.php?title=FAQ:Coding_12&amp;oldid=4022&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											<li id="t-permalink"><a href="http://www.net-snmp.org/wiki/index.php?title=FAQ:Coding_12&amp;oldid=4022" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="http://www.net-snmp.org/wiki/index.php?title=FAQ:Coding_12&amp;action=info" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-poweredbyico">
									<a href="http://www.mediawiki.org/"><img src="http://www.net-snmp.org/wiki/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/wiki/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /wiki/resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a>
							</div>
					<ul id="f-list">
									<li id="lastmod"> This page was last modified on 20 July 2009, at 20:56.</li>
									<li id="privacy"><a href="http://www.net-snmp.org/wiki/index.php/Net-SNMP_Wiki:Privacy_policy" title="Net-SNMP Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="http://www.net-snmp.org/wiki/index.php/Net-SNMP_Wiki:About" title="Net-SNMP Wiki:About">About Net-SNMP Wiki</a></li>
									<li id="disclaimer"><a href="http://www.net-snmp.org/wiki/index.php/Net-SNMP_Wiki:General_disclaimer" title="Net-SNMP Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.state({"user":"ready","user.groups":"ready"});mw.loader.load(["mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"]);
} );</script><script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgBackendResponseTime":154});
} );</script></body>
<!-- Mirrored from www.net-snmp.org/wiki/index.php?title=FAQ:Coding_12&oldid=4022 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 May 2024 19:20:49 GMT -->
</html>
