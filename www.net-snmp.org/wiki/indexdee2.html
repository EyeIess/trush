

<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from www.net-snmp.org/wiki/index.php?title=Converting_the_SVN_Repository_To_Git&printable=yes by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 May 2024 19:28:14 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Converting the SVN Repository To Git - Net-SNMP Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":0,"wgPageName":"Converting_the_SVN_Repository_To_Git","wgTitle":"Converting the SVN Repository To Git","wgCurRevisionId":5045,"wgRevisionId":5045,"wgArticleId":2202,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Git","History"],"wgBreakFrames":!1,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Converting_the_SVN_Repository_To_Git","wgRelevantArticleId":2202,"wgIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits"]);
} );</script>
<link rel="stylesheet" href="load531d.css?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cskins.monobook.styles&amp;only=styles&amp;printable=1&amp;skin=monobook" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}</style>
<script async="" src="loadf198.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;printable=1&amp;skin=monobook"></script>
<meta name="generator" content="MediaWiki 1.26.3" />
<meta name="robots" content="noindex,follow" />
<link rel="shortcut icon" href="../favicon.html" />
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Net-SNMP Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="api251f.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Net-SNMP Wiki Atom feed" href="apidf90.php?title=Special:RecentChanges&amp;feed=atom" />
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Converting_the_SVN_Repository_To_Git skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Converting the SVN Repository To Git</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Net-SNMP Wiki</div>
					<div id="contentSub"></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>This page documents what was done to convert the Net-SNMP source code repository from <a href="index.php/SVN.html?title=SVN&amp;action=edit&amp;redlink=1" class="new" title="SVN (page does not exist)">SVN</a> to <a href="index.php/Git.html" title="Git">Git</a> on June 27th, 2011.  It is here for historical purposes, and may help other projects that wish to do the same conversion.
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#svn2git"><span class="tocnumber">1</span> <span class="toctext">svn2git</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Narrowing_to_the_right_sub-repo"><span class="tocnumber">2</span> <span class="toctext">Narrowing to the right sub-repo</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Branch_Merging_Setups"><span class="tocnumber">3</span> <span class="toctext">Branch Merging Setups</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Small_Cleanups"><span class="tocnumber">4</span> <span class="toctext">Small Cleanups</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Converting_to_a_bare_repo"><span class="tocnumber">5</span> <span class="toctext">Converting to a bare repo</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Adding_Hooks"><span class="tocnumber">6</span> <span class="toctext">Adding Hooks</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="svn2git">svn2git</span></h2>
<p>Of the various conversion choices (including 'git svn clone'), svn2git seemed like it would work the best.  So this was run:
</p>
<pre> # svn2git --authors /home/hardaker/src/snmp/git-authors -m -v file:///home/hardaker/lib/sf-bkups/net-snmp-convert-svnrepo/
</pre>
<p>(this process takes a long time but is much faster with a local repository which is a copy of the data pulled from <a href="index.php/SourceForge.html?title=SourceForge&amp;action=edit&amp;redlink=1" class="new" title="SourceForge (page does not exist)">SourceForge</a>.  It only took about 4 hours to convert compared to many more that it would have taken to run it against an online repo)
</p>
<h2><span class="mw-headline" id="Narrowing_to_the_right_sub-repo">Narrowing to the right sub-repo</span></h2>
<p>With SVN the various "projects" (httpd, net-snmp, ...) existed at the top level.  This isn't correct for the now separated repositories that git allows for.  Thus, git's <i>filter-branch</i> was used to narrow the results:
</p>
<pre> # git filter-branch --subdirectory-filter net-snmp -- --all
</pre>
<p>Afterward, the <i>packed-refs</i> file wasn't really liked by the sourceforge git version (at least I think this is where the issue lies).  It had lines in it like:
</p>
<pre> 7862717b0cdb17f6c90b56ec41ee4a0f5006a301 refs/tags/Ext-5-6-1-1
 ^88bdebdbe0075cf43a36085219a6a2802068dbda
</pre>
<p>Where there are now two references for a tag (7862 and 88bd).  So, to fix this I manually edited the file to leave only one line with the newer reference being listed for the tag.  This allowed git clone from the sourceforge server to properly pull the tags.
</p><p>But...  The tags didn't get properly rewritten, it seems, and if you checkout out a tag you'll find that the code is still in the 'net-snmp' sub-directory and not in the current directory like it should be.
</p>
<h2><span class="mw-headline" id="Branch_Merging_Setups">Branch Merging Setups</span></h2>
<p>In order to make it possible to follow the project's <a href="index.php/Git_Branch_Management.html" title="Git Branch Management">Git Branch Management</a> strategies, the branches had to be set up to follow this paradigm.  To do this, the following steps were performed.  This step ensure that future merges from lower branches would only contain the newer code choices and that from a "future merges" perspective everything previous to this point would have been considered as "already merged".
</p>
<pre># git checkout V5-1-patches
# git merge -s ours V5-0-patches
# git checkout V5-2-patches
# git merge -s ours V5-1-patches
# git checkout V5-3-patches
# git merge -s ours V5-2-patches
# git checkout V5-4-patches
# git merge -s ours V5-3-patches
# git checkout V5-5-patches
# git merge -s ours V5-4-patches
# git checkout V5-6-patches
# git merge -s ours V5-5-patches
# git checkout master
# git merge -s ours V5-6-patches
</pre>
<h2><span class="mw-headline" id="Small_Cleanups">Small Cleanups</span></h2>
<ul><li> git config receive.denyNonFastforwards true</li>
<li> git config core.sharedrepository 1</li>
<li> delete the svn-remote and svn sections of the .git/config</li>
<li> git gc --aggressive</li></ul>
<h2><span class="mw-headline" id="Converting_to_a_bare_repo">Converting to a bare repo</span></h2>
<pre># mv .git ../new-repo.git
# cd ../new-repo.git
# git config --bool core.bare true
</pre>
<h2><span class="mw-headline" id="Adding_Hooks">Adding Hooks</span></h2>
<ul><li> place the hook from <a rel="nofollow" class="external text" href="http://sourceforge.net/apps/trac/sourceforge/wiki/Git hook script example">here</a> into hooks/post-receive</li></ul>
<pre># git config hooks.mailinglist net-snmp-cvs@lists.sourceforge.net
</pre>
<!-- 
NewPP limit report
Cached time: 20240514191742
Cache expiry: 0
Dynamic content: true
CPU time usage: 0.006 seconds
Real time usage: 0.010 seconds
Preprocessor visited node count: 23/1000000
Preprocessor generated node count: 28/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 - -total
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index3ec0.html?title=Converting_the_SVN_Repository_To_Git&amp;oldid=5045">http://www.net-snmp.org/wiki/index.php?title=Converting_the_SVN_Repository_To_Git&amp;oldid=5045</a>"</div>
					<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="index.php/Special_Categories.html" title="Special:Categories">Categories</a>: <ul><li><a href="index.php/Category_Git.html" title="Category:Git">Git</a></li><li><a href="index.php/Category_History.html?title=Category:History&amp;action=edit&amp;redlink=1" class="new" title="Category:History (page does not exist)">History</a></li></ul></div></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-main" class="selected"><a href="index.php/Converting_the_SVN_Repository_To_Git.html" title="View the content page [c]" accesskey="c">Page</a></li>
				<li id="ca-talk" class="new"><a href="index.php/Talk_Converting_the_SVN_Repository_To_Git.html?title=Talk:Converting_the_SVN_Repository_To_Git&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-viewsource"><a href="index05ae.html?title=Converting_the_SVN_Repository_To_Git&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
				<li id="ca-history"><a href="indexa72c.html?title=Converting_the_SVN_Repository_To_Git&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="index105d.html?title=Special:UserLogin&amp;returnto=Converting+the+SVN+Repository+To+Git&amp;returntoquery=printable%3Dyes&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="index1a88.html?title=Special:UserLogin&amp;returnto=Converting+the+SVN+Repository+To+Git&amp;returntoquery=printable%3Dyes" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="index.php/Main_Page.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-project" role="navigation">
		<h3>project</h3>
		<div class='pBody'>
							<ul>
											<li id="n-Web-Site"><a href="../index.html" rel="nofollow">Web Site</a></li>
											<li id="n-Wiki"><a href="index.php/Main_Page.html">Wiki</a></li>
											<li id="n-Download"><a href="../download.html" rel="nofollow">download</a></li>
											<li id="n-Mailing-Lists"><a href="../support/mailinglists.html" rel="nofollow">Mailing Lists</a></li>
											<li id="n-Bug-Reports"><a href="../support/bugreports.html" rel="nofollow">Bug Reports</a></li>
											<li id="n-Patches"><a href="../support/patches.html" rel="nofollow">Patches</a></li>
									</ul>
					</div>
		</div>
		<div class="generated-sidebar portlet" id="p-documentation" role="navigation">
		<h3>documentation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-Tutorials"><a href="index.php/Tutorials.html">Tutorials</a></li>
											<li id="n-FAQ"><a href="index.php/FAQ.html">FAQ</a></li>
											<li id="n-Good-Answers"><a href="index.php/Category_GoodAnswer.html">Good Answers</a></li>
											<li id="n-Manual-Pages"><a href="../man/index.html" rel="nofollow">Manual Pages</a></li>
											<li id="n-Tools"><a href="index.php/Category_Tools.html">Tools</a></li>
									</ul>
					</div>
		</div>
		<div class="generated-sidebar portlet" id="p-wiki" role="navigation">
		<h3>wiki</h3>
		<div class='pBody'>
							<ul>
											<li id="n-recentchanges"><a href="index.php/Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="index.php/Notes20111219.html" title="Load a random page [x]" accesskey="x">Random page</a></li>
											<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="http://www.net-snmp.org/wiki/index.php" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Net-SNMP Wiki [f]" accesskey="f" id="searchInput" />
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="index.php/Special_WhatLinksHere/Converting_the_SVN_Repository_To_Git.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="index.php/Special_RecentChangesLinked/Converting_the_SVN_Repository_To_Git.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="index.php/Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-permalink"><a href="index3ec0.html?title=Converting_the_SVN_Repository_To_Git&amp;oldid=5045" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="indexb9c4.html?title=Converting_the_SVN_Repository_To_Git&amp;action=info" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-poweredbyico">
									<a href="http://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/wiki/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /wiki/resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a>
							</div>
					<ul id="f-list">
									<li id="lastmod"> This page was last modified on 28 June 2011, at 14:46.</li>
									<li id="privacy"><a href="index.php/Net-SNMP_Wiki_Privacy_policy.html" title="Net-SNMP Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="index.php/Net-SNMP_Wiki_About.html" title="Net-SNMP Wiki:About">About Net-SNMP Wiki</a></li>
									<li id="disclaimer"><a href="index.php/Net-SNMP_Wiki_General_disclaimer.html" title="Net-SNMP Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.state({"user":"ready","user.groups":"ready"});mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"]);
} );</script><script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgBackendResponseTime":157});
} );</script></body>
<!-- Mirrored from www.net-snmp.org/wiki/index.php?title=Converting_the_SVN_Repository_To_Git&printable=yes by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 May 2024 19:28:15 GMT -->
</html>
