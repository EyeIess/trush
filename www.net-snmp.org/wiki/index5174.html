

<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from www.net-snmp.org/wiki/index.php?title=TUT:Writing_a_Dynamically_Loadable_Object&oldid=4469 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 May 2024 18:27:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>TUT:Writing a Dynamically Loadable Object - Net-SNMP Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":0,"wgPageName":"TUT:Writing_a_Dynamically_Loadable_Object","wgTitle":"TUT:Writing a Dynamically Loadable Object","wgCurRevisionId":4469,"wgRevisionId":4469,"wgArticleId":1753,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":!1,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"TUT:Writing_a_Dynamically_Loadable_Object","wgRelevantArticleId":1753,"wgIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits"]);
} );</script>
<link rel="stylesheet" href="load34a1.css?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook" />
<!--[if IE 6]><link rel="stylesheet" href="/wiki/skins/MonoBook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/wiki/skins/MonoBook/IE70Fixes.css?303" media="screen" /><![endif]-->
<meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}</style>
<script async="" src="load3a95.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook"></script>
<meta name="generator" content="MediaWiki 1.26.3" />
<meta name="robots" content="noindex,nofollow" />
<link rel="shortcut icon" href="http://www.net-snmp.org/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="http://www.net-snmp.org/wiki/opensearch_desc.php" title="Net-SNMP Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://www.net-snmp.org/wiki/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Net-SNMP Wiki Atom feed" href="http://www.net-snmp.org/wiki/index.php?title=Special:RecentChanges&amp;feed=atom" />
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-TUT_Writing_a_Dynamically_Loadable_Object skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">TUT:Writing a Dynamically Loadable Object</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Net-SNMP Wiki</div>
					<div id="contentSub"><div id="mw-revision-info">Revision as of 13:44, 11 August 2010 by <a href="http://www.net-snmp.org/wiki/index.php/User:Wes" title="User:Wes" class="mw-userlink">Wes</a> <span class="mw-usertoollinks">(<a href="http://www.net-snmp.org/wiki/index.php/User_talk:Wes" title="User talk:Wes">Talk</a> | <a href="http://www.net-snmp.org/wiki/index.php/Special:Contributions/Wes" title="Special:Contributions/Wes">contribs</a>)</span> <span class="comment">(<a href="#Loading_via_the_snmpd.conf_file">→</a>‎<span dir="auto"><span class="autocomment">Loading via the snmpd.conf file: </span> the config line shouldn&#039;t have a &#039;snmpd&#039; in front of it.</span>)</span></div><br />
				<div id="mw-revision-nav">(<a href="http://www.net-snmp.org/wiki/index.php?title=TUT:Writing_a_Dynamically_Loadable_Object&amp;diff=prev&amp;oldid=4469" title="TUT:Writing a Dynamically Loadable Object">diff</a>) <a href="http://www.net-snmp.org/wiki/index.php?title=TUT:Writing_a_Dynamically_Loadable_Object&amp;direction=prev&amp;oldid=4469" title="TUT:Writing a Dynamically Loadable Object">← Older revision</a> | Latest revision (diff) | Newer revision → (diff)</div></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>This page describes how to build extension for Net-SNMP as <em>shared objects</em>, binary files that can be loaded by the SNMPd daemon directly and are executed as part of the daemon. This differs from the concept introduced in <a href="http://www.net-snmp.org/wiki/index.php/TUT:Writing_a_MIB_Module" title="TUT:Writing a MIB Module">Writing a MIB Module</a> in that the extension resides in its own binary file and is loaded by the agent <em>at runtime</em>. This adds the flexibility to add new functionality&#160;/ MIBs <em>after</em> the agent has been compiled, enabling you to extent the daemon provided by a binary package without the need to roll your own modified package.
</p><p>Yet another possibility is offered by <em>Subagents</em>, see <a href="http://www.net-snmp.org/wiki/index.php/TUT:Writing_a_Subagent" title="TUT:Writing a Subagent">Writing a Subagent</a>: Subagents are separate processes that do not share memory, file descriptors and so on with the daemon and must use <em>interprocess communication</em> (IPC) to communicate with the daemon.
</p><p>Writing dynamically loadable objects is interesting because you will have the entire API provided by Net-SNMP at your disposal, for example a caching infrastructure. Shared objects loaded this way usually get their configuration from the same configuration file the core daemon uses, which often is a nice thing. Disadvantages are that a programming mistake in your custom extension may crash the entire daemon and that your code is by design always executed as the same user the core daemon is executed as, i.&#160;e. potentially with unnecessary privileges ­— or too little, depending on your setup.
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Prerequisites"><span class="tocnumber">1</span> <span class="toctext">Prerequisites</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Initialization"><span class="tocnumber">2</span> <span class="toctext">Initialization</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Configuration"><span class="tocnumber">3</span> <span class="toctext">Configuration</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Writing_the_module"><span class="tocnumber">4</span> <span class="toctext">Writing the module</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Compiling_and_linking_the_shared_object"><span class="tocnumber">5</span> <span class="toctext">Compiling and linking the shared object</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Steps_to_test_the_shared_object_via_runtime_MIB_configuration"><span class="tocnumber">6</span> <span class="toctext">Steps to test the shared object via runtime MIB configuration</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Loading_via_the_snmpd.conf_file"><span class="tocnumber">7</span> <span class="toctext">Loading via the snmpd.conf file</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#See_also"><span class="tocnumber">8</span> <span class="toctext">See also</span></a></li>
<li class="toclevel-1"><a href="#Tutorial_Sections"><span class="tocnumber">9</span> <span class="toctext">Tutorial Sections</span></a>
<ul>
<li class="toclevel-2"><a href="#About_the_SNMP_Protocol"><span class="tocnumber">9.1</span> <span class="toctext">About the SNMP Protocol</span></a></li>
<li class="toclevel-2"><a href="#Net-SNMP_Command_Line_Applications"><span class="tocnumber">9.2</span> <span class="toctext">Net-SNMP Command Line Applications</span></a></li>
<li class="toclevel-2"><a href="#Application_Configuration"><span class="tocnumber">9.3</span> <span class="toctext">Application Configuration</span></a></li>
<li class="toclevel-2"><a href="#Net-SNMP_Daemons"><span class="tocnumber">9.4</span> <span class="toctext">Net-SNMP Daemons</span></a></li>
<li class="toclevel-2"><a href="#Coding_Tutorials"><span class="tocnumber">9.5</span> <span class="toctext">Coding Tutorials</span></a></li>
<li class="toclevel-2"><a href="#Debugging_SNMP_Applications_and_Agents"><span class="tocnumber">9.6</span> <span class="toctext">Debugging SNMP Applications and Agents</span></a></li>
<li class="toclevel-2"><a href="#Operating_System_Specific_Tutorials"><span class="tocnumber">9.7</span> <span class="toctext">Operating System Specific Tutorials</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Prerequisites">Prerequisites</span></h2>
<p>While not strictly necessary, you'll probably have an easier time building a shared object if you start with an already functioning <em>MIB module</em> (extension) as described in <a href="http://www.net-snmp.org/wiki/index.php/TUT:Writing_a_MIB_Module" title="TUT:Writing a MIB Module">Writing a MIB Module</a>. This section of the tutorials will assume you have a working extension build directly into the daemon already and tells you how to move that out of the daemon and into a shared object.
</p><p>For demonstration purposes, we'll refer to some example MIB objects and code: the <a rel="nofollow" class="external text" href="http://www.net-snmp.org/tutorial/tutorial-5/toolkit/mib_module/NET-SNMP-TUTORIAL-MIB.txt">NET-SNMP-TUTORIAL-MIB</a> MIB, and the <a rel="nofollow" class="external text" href="http://www.net-snmp.org/tutorial/tutorial-5/toolkit/demon/nstAgentSubagentObject.c">example MIB module</a> and it's <a rel="nofollow" class="external text" href="http://www.net-snmp.org/tutorial/tutorial-5/toolkit/demon/nstAgentSubagentObject.h">header file</a>. 
</p><p><strong>Note:</strong> The <code>dlmod</code> code is based on the <code>UCD-DLMOD-MIB</code>. It resides in the <code>ucdExperimental</code> name-space, but since nothing has changed since 1999 it's pretty safe to assume this interface is stable. You can find the MIB in <code>mibs/UCD-DLMOD-MIB.txt</code> in the source-code distribution.
</p><p>The Net-SNMP package must have been built with dynamically loadable module support for the following to work. You should therefore enable the UCD MIB when configuring the sources:
</p>
<pre>$ ./configure --with-mib-modules="ucd_snmp $OTHER_MIBS" $OTHER_OPTIONS
</pre>
<p>Besides the right MIB, you need of course support for shared objects. This is enabled with the <code>--enable-shared</code> argument of <code>configure</code>, but should be automatically enabled if your system supports dynamically loaded objects. You can check for support in your agent but looking at the output of the <code>snmpd&#160;-H</code> command for the "dlmod" token. If its listed, the compiled agent supports it. 
</p><p><strong>Note:</strong> All command line options below assume you have an appropriately setup <code>~/.snmp/snmp.conf</code> file that allows you to not have to specify a SNMP version number, community name, username, or whatever else in order to talk to your agent. The agent, of course, must have a matching <code>/usr/local/share/snmp/snmpd.conf</code> file (or equivalent). 
</p><p>Here are the files discussed in this example so you can download them: 
</p>
<table cellspacing="0" border="1" style="background-color: #ccf; margin-left: 50px;">
<tr>
<th> File
</th>
<th> Description
</th></tr>
<tr>
<td> <a rel="nofollow" class="external text" href="http://www.net-snmp.org/tutorial/tutorial-5/toolkit/demoapp/Makefile">Makefile</a> </td>
<td> A simple makefile used to build the projects
</td></tr>
<tr>
<td> <a rel="nofollow" class="external text" href="http://www.net-snmp.org/tutorial/tutorial-5/toolkit/mib_module/NET-SNMP-TUTORIAL-MIB.txt">NET-SNMP-TUTORIAL-MIB.txt</a> </td>
<td> The MIB we'll be writing code for in the various pieces of the agent extension tutorial
</td></tr>

<tr>
<td> <a rel="nofollow" class="external text" href="http://www.net-snmp.org/tutorial/tutorial-5/toolkit/dlmod/nstAgentPluginObject.h">nstAgentPluginObject.h</a> </td>
<td> The MIB module's header file
</td></tr>
<tr>
<td> <a rel="nofollow" class="external text" href="http://www.net-snmp.org/tutorial/tutorial-5/toolkit/dlmod/nstAgentPluginObject.c">nstAgentPluginObject.c</a> </td>
<td> The MIB module's C source code
</td></tr></table>
<h2><span class="mw-headline" id="Initialization">Initialization</span></h2>
<p>After loading the shared object to memory, the <em>object loader</em> will look for an initialization function inside the shared object. The name of this function is <code>init_<em>name</em></code>, where "name" is the name of your extension. The name of the example module is "nstAgentPluginObject", so the loader will look for a function with the following prototype:
</p>
<pre>void init_nstAgentPluginObject (void);
</pre>
<p>There's a complementary function, called <code>deinit_<em>name</em></code>, which is called when the module is unloaded, for example when the daemon is shutting down. Unsurprisingly, the prototype of the example deinit-function is:
</p>
<pre>void deinit_nstAgentPluginObject (void);
</pre>
<p>These are the only two functions called by the object loaded. All other functions (and module-global variables) therefore should be declared <code>static</code>.
</p><p>It is important to note that nothing prevents the agent from a second "load" of the same shared object. The module isn't actually loaded a second time, but the initialization function is run again. Modules should be able to handle that, for example by checking if they were already initialized when returning without further actions if so. The same applies to the de-initialization functions.
</p><p>Further when the last unload happens the module is unloaded and so the code disappears. When this happens everything registered with the agent from the module must be unregistered since not doing so is an open invitation to core dumps.
</p><p>You can check the names of currently loaded modules using the <code>UCD-DLMOD-MIB::dlmodName</code> OID.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>As mentioned in the introduction, you can register own configuration options which extend the daemon's configuration. To do so, you need to provide two callback functions which are called when appropriate: One that handles a configuration statement, and one that cleans up when necessary. A short example is given below and registers the <em>foobar</em> option:
</p>
<pre>static const char *global_foobar = NULL;
…
static void config_handle (const char *key, char *value)
{
  if (strcasecmp ("foobar", key) == 0)
  {
    char *tmp = strdup (value);
    if (tmp&#160;!= NULL)
    {
      free (global_foobar);
      global_foobar = tmp;
    }
  }
  else if …
} /* void config_handle */

static void config_free (void)
{
  free (global_foobar);
  global_foobar = NULL;
}
…
snmpd_register_config_handler ("foobar",
    config_handle, config_free,
    "The foobar option does something incredible!");
</pre>
<p>Do <strong>not</strong> just assign the <code>value</code> pointer to a global variable or dreadful things may happen!
</p>
<h2><span class="mw-headline" id="Writing_the_module">Writing the module</span></h2>
<p>The next steps are basically the same as those steps outlined in <a href="http://www.net-snmp.org/wiki/index.php/TUT:Writing_a_MIB_Module" title="TUT:Writing a MIB Module">Writing a MIB Module</a>, i.&#160;e. register one or more data sets at some OIDs, for example using the <a rel="nofollow" class="external text" href="http://www.net-snmp.org/dev/agent/group__table__dataset.html#ga14">netsnmp_register_table_data_set</a>, see <a rel="nofollow" class="external text" href="http://www.net-snmp.org/dev/agent/data__set_8c-example.html">the data_set.c example</a>. Please see <a href="http://www.net-snmp.org/wiki/index.php/TUT:Writing_a_MIB_Module" title="TUT:Writing a MIB Module">the introductory documentation</a>.
</p>
<h2><span class="mw-headline" id="Compiling_and_linking_the_shared_object">Compiling and linking the shared object</span></h2>
<p>Building shared objects for Net-SNMP works just like building any other shared object. If you have not done that so far, you should probably read your compilers documentation on the subject. When using the <em>GNU Compiler Collection</em> (GCC), you will most likely need the <code>-fPIC -shared</code> flags.
</p><p>You should use the <code>net-snmp-config</code> script to determine additional compiler and linker flags. For example:
</p>
<pre>$ cc `net-snmp-config --cflags` -fPIC -shared -g -O0 -o nstAgentPluginObject.so nstAgentPluginObject.c `net-snmp-config --libs`
</pre>
<p>You can find example <em>Makefiles</em> at <code>agent/mibgroup/examples/Makefile.dlmod</code> in the source-code distribution and at <a rel="nofollow" class="external autonumber" href="http://www.net-snmp.org/tutorial/tutorial-5/toolkit/demoapp/Makefile">[1]</a>. Hopefully this'll get you started.
</p>
<h2><span class="mw-headline" id="Steps_to_test_the_shared_object_via_runtime_MIB_configuration">Steps to test the shared object via runtime MIB configuration</span></h2>
<ol><li> Start the snmpd and watch the dlmod and nstAgentPluginObject modules interact using the debugging flag (this assumes you already have access control set up properly for your agent): 
<dl><dd>% <b>snmpd -f -L -DnstAgentPluginObject,dlmod</b></dd></dl></li>
<li> In another window, test to make sure that the agent doesn't currently support the nstAgentPluginObject (if you get different results running this command you need to recompile the net-snmp agent without the nstAgentPluginObject mib module compiled in directly): 
<dl><dd>% <b>snmpget localhost NET-SNMP-TUTORIAL-MIB::nstAgentPluginObject.0</b></dd>
<dd>nstAgentPluginObject.0 = No Such Object available on this agent at this OID          </dd></dl></li>
<li> Then, run snmpset to create a new row in the dlmod table: 
<dl><dd>% <b>snmpset localhost UCD-DLMOD-MIB::dlmodStatus.1 i create</b></dd>
<dd>dlmodStatus.1 = create(6)</dd></dl></li>
<li> See that the row was created: 
<dl><dd>% <b>snmptable localhost UCD-DLMOD-MIB::dlmodTable  </b></dd>
<dd>SNMP table: dlmodTable</dd>
<dd></dd>
<dd>dlmodName dlmodPath dlmodError dlmodStatus</dd>
<dd>                                   unloaded</dd></dl></li>
<li>Then set the properties of the row up to point to our new object and to give it a name: 
<dl><dd>% <b>snmpset localhost UCD-DLMOD-MIB::dlmodName.1 s "nstAgentPluginObject" UCD-DLMOD-MIB::dlmodPath.1 s "/path/to/nstAgentPluginObject.so"  </b></dd>
<dd>dlmodName.1 = "nstAgentPluginObject" </dd>
<dd>dlmodName.1 = "/path/to/nstAgentPluginObject.so"</dd>
<dd></dd>
<dd>% <b>snmptable localhost UCD-DLMOD-MIB::dlmodTable  </b></dd>
<dd> SNMP table: dlmodTable</dd>
<dd> </dd>
<dd>    dlmodName dlmodPath                 dlmodError   dlmodStatus</dd>
<dd> nstAgentPluginObject /path/to/nstAgentPluginObject.so                  unloaded</dd></dl></li>
<li>Finally, load the shared object into the running agent: 
<dl><dd>% <b>snmpset localhost UCD-DLMOD-MIB::dlmodStatus.1 i load  </b></dd>
<dd>dlmodStatus.1 = loaded(1)</dd>
<dd></dd>
<dd>% snmptable localhost UCD-DLMOD-MIB::dlmodTable  </dd>
<dd>SNMP table: dlmodTable</dd>
<dd> </dd>
<dd>    dlmodName                      dlmodPath dlmodError dlmodStatus</dd>
<dd> nstAgentPluginObject /path/to/nstAgentPluginObject.so                 loaded</dd></dl></li>
<li>If everything above was done correctly, then the following command should work and will access the shared object's data: 
<dl><dd>% <b>snmpget localhost NET-SNMP-TUTORIAL-MIB::nstAgentPluginObject.0  </b></dd>
<dd> nstAgentPluginObject.0 = INTEGER: 3</dd></dl></li></ol>
<h2><span class="mw-headline" id="Loading_via_the_snmpd.conf_file">Loading via the snmpd.conf file</span></h2>
<p>A more common method of loading the shared object is to instruct the agent to load the extension at startup in the <code>snmpd.conf</code> configuration file. This can be achieved using the <code>dlmod</code> configuration option:
</p>
<pre>dlmod nstAgentPluginObject /path/to/nstAgentPluginObject.so
</pre>
<p>The first argument specifies the shared object's module name, the second argument specifies the full pathname of the shared object file. The module name used here <em>must</em> match the name of the initialization function, see <a href="#Initialization">#Initialization</a>.
</p><p>All custom configuration options, as described in <a href="#Configuration">#Configuration</a>, must <em>succeed</em> the <code>dlmod</code> statement.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul><li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:Writing_a_MIB_Module" title="TUT:Writing a MIB Module">TUT:Writing a MIB Module</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/Net-snmp_extensions" title="Net-snmp extensions">Net-snmp extensions</a><br />List of extensions, some of which are built as dynamically loaded objects.</li></ul>
<h2><span class="mw-headline" id="Tutorial_Sections">Tutorial Sections</span></h2>
<h3><span class="mw-headline" id="About_the_SNMP_Protocol">About the SNMP Protocol</span></h3>
<p>These tutorial links talk about SNMP generically and how the protocol itself works.  They are good introductory reading material and the concepts are important to understand before diving into the later tutorials about Net-SNMP itself.
</p>
<ul><li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:SNMP" title="TUT:SNMP"> How SNMP Works</a>: About the protocol itself (GETs, GETNEXTs, etc)</li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:MIBs" title="TUT:MIBs"> What data is in SNMP</a>: All about SNMP <i>Management Information Bases</i> (MIBs)</li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:Security" title="TUT:Security"> Securing SNMP</a>: How to use the SNMP protocol securely</li></ul>
<h3><span class="mw-headline" id="Net-SNMP_Command_Line_Applications">Net-SNMP Command Line Applications</span></h3>
<p>These tutorial pages discuss the command line tools provided in the Net-SNMP suite of tools.  Nearly all the example commands in these tutorials works if you try it yourself, as they're all examples that talk to our online Net-SNMP test agent.  Given them a shot!
</p>
<ul><li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:snmptranslate" title="TUT:snmptranslate"> snmptranslate</a>: learning about the MIB tree.</li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:snmpget" title="TUT:snmpget"> snmpget</a>: retrieving data from a host.</li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:snmpgetnext" title="TUT:snmpgetnext"> snmpgetnext</a>: retrieving unknown indexed data.</li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:snmpwalk" title="TUT:snmpwalk"> snmpwalk</a>: retrieving lots of data at once!</li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:snmptable" title="TUT:snmptable"> snmptable</a>: displaying a table.</li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:snmpset" title="TUT:snmpset"> snmpset</a>: peforming write operations.</li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:snmpbulkget" title="TUT:snmpbulkget"> snmpbulkget</a>: communicates with a network entity using SNMP GETBULK request</li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:snmpbulkwalk" title="TUT:snmpbulkwalk"> snmpbulkwalk</a>: retrieve a sub-tree of management values using SNMP GETBULK requests.</li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:snmptrap" title="TUT:snmptrap"> snmptrap</a>: Sending and receiving traps, and acting upon them. 
<ul><li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:snmptrap_SNMPv3" title="TUT:snmptrap SNMPv3"> Traps/informs with SNMPv3/USM</a>: Sending and receiving SNMPv3/USM TRAPs and INFORMs</li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:agentxtrap" title="TUT:agentxtrap"> Sending Traps/Informs via AgentX</a>: Sending notifications from the command line through snmpd </li></ul></li>
<li> Common command line options: 
<ul><li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:Using_and_loading_MIBS" title="TUT:Using and loading MIBS"> Using and loading MIBS</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:SNMPv3_Options" title="TUT:SNMPv3 Options"> SNMPv3/USM Options</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:Using_TLS" title="TUT:Using TLS"> Using SNMPv3 over TLS and DTLS</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:Customized_Output_Formats" title="TUT:Customized Output Formats"> Customized Output Formats</a></li></ul></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:mib2c_config_files" title="TUT:mib2c config files"> Writing mib2c config files </a></li></ul>
<h3><span class="mw-headline" id="Application_Configuration">Application Configuration</span></h3>
<p>All of our applications support configuration to allow you to customize how they behave.
</p>
<ul><li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:Configuring_Net-SNMP_Applications" title="TUT:Configuring Net-SNMP Applications"> Configuration files for Net-SNMP applications</a></li></ul>
<h3><span class="mw-headline" id="Net-SNMP_Daemons">Net-SNMP Daemons</span></h3>
<p>Net-SNMP comes with two long-running daemons: a SNMP agent (<i><a href="http://www.net-snmp.org/wiki/index.php/Snmpd" title="Snmpd">snmpd</a></i>) for responding to management requests and a notification receiver (<i><a href="http://www.net-snmp.org/wiki/index.php/Snmptrapd" title="Snmptrapd">snmptrapd</a></i>) for receiving SNMP notifications.
</p>
<ul><li> SNMP Agent (snmpd) Configuration
<ul><li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:snmpd_configuration" title="TUT:snmpd configuration">Configuration Basics</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/Vacm" title="Vacm"> Access Control (VACM)</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/Snmpconf" title="Snmpconf">snmpconf</a></li></ul></li>
<li> SNMP Notification Receiver (snmptrapd)
<ul><li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:Configuring_snmptrapd" title="TUT:Configuring snmptrapd">Configuring snmptrapd</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:Configuring_snmptrapd_to_receive_SNMPv3_notifications" title="TUT:Configuring snmptrapd to receive SNMPv3 notifications">Configuring SNMPv3 notifications</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:Configuring_snmptrapd_to_parse_MIBS_from_3rd_party_Vendors" title="TUT:Configuring snmptrapd to parse MIBS from 3rd party Vendors">Configuring snmptrapd to understand vendor-specific MIBS (Cisco)</a></li></ul></li>
<li> Agent Monitoring
<ul><li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:DisMan_Monitoring" title="TUT:DisMan Monitoring">DisMan Monitoring</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:MRTG" title="TUT:MRTG">Monitoring with MRTG</a></li></ul></li></ul>
<h3><span class="mw-headline" id="Coding_Tutorials">Coding Tutorials</span></h3>
<p>Net-SNMP comes with a highly flexible and extensible API.  The API allows you to create your own commands, add extensions to the agent to support your own <a href="http://www.net-snmp.org/wiki/index.php/MIB" title="MIB">MIBs</a> and perform specialized processing of notifications.
</p>
<ul><li> Client / Manager Coding Tutorials
<ul><li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:Simple_Application" title="TUT:Simple Application">Writing a simple application</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:Simple_Async_Application" title="TUT:Simple Async Application">Writing a simple asynchronous application</a></li></ul></li>
<li> Agent Coding Tutorials
<ul><li> The <a href="http://www.net-snmp.org/wiki/index.php/Agent_Architecture" title="Agent Architecture">Agent Architecture</a> page might be worth reading before or after the agent coding tutorials, and describes how the <a href="http://www.net-snmp.org/wiki/index.php/Agent_Helpers" title="Agent Helpers">Agent Helpers</a> work under the hood.</li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:Writing_a_MIB_Module" title="TUT:Writing a MIB Module"> Writing a mib module</a> to serve information described by an SNMP MIB, and how to compile it into the net-snmp snmpd agent.</li>
<li> <strong class="selflink"> Writing a Dynamically Loadable Object</strong> that can be loaded into the SNMP agent.</li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:Writing_a_Subagent" title="TUT:Writing a Subagent"> Writing a Subagent</a> that can be run to attach to the snmpd master agent.</li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/Tut:Extending_snmpd_using_perl" title="Tut:Extending snmpd using perl"> Writing a perl plugin to extend the agent</a> using the NetSNMP::agent module.</li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/Tut:Extending_snmpd_using_shell_scripts" title="Tut:Extending snmpd using shell scripts"> Writing shell scripts to extend the agent</a></li>
<li> Using mib2c to help write an agent code template for you
<ul><li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:mib2c_General_Overview" title="TUT:mib2c General Overview"> General mib2c Overview</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:mib2c-update" title="TUT:mib2c-update"> Using the mib2c-update script to <i>recode</i> your code</a></li>
<li> <a rel="nofollow" class="external text" href="http://www.net-snmp.org/tutorial/tutorial-5/toolkit/mfd/">mib2c.mfd.conf tutorial</a></li></ul></li></ul></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/TUT:Header_files" title="TUT:Header files">Header files and autoconf</a></li></ul>
<h3><span class="mw-headline" id="Debugging_SNMP_Applications_and_Agents">Debugging SNMP Applications and Agents</span></h3>
<p>All our tools and applications have extensive debugging output.  These tutorials talk about how the debugging system works and how you can add your own debugging statements to you code:
</p>
<ul><li> <a href="http://www.net-snmp.org/wiki/index.php/Debugging_output" title="Debugging output"> Debugging output printed using the -D command line option</a>
<ul><li> <a href="http://www.net-snmp.org/wiki/index.php/DEBUGMSG" title="DEBUGMSG"> Putting DEBUGMSG tokens in your code</a></li></ul></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php?title=Debugging_packet_traces&amp;action=edit&amp;redlink=1" class="new" title="Debugging packet traces (page does not exist)"> Using -Ddump to display packet breakdowns</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/Debugger" title="Debugger">Debugging using GDB</a></li></ul>
<h3><span class="mw-headline" id="Operating_System_Specific_Tutorials">Operating System Specific Tutorials</span></h3>
<ul><li> Building With Visual Studio 2005 Express
<ul><li> <a href="http://www.net-snmp.org/wiki/index.php/Using_the_command_line_and_nmake" title="Using the command line and nmake">Using the command line and nmake</a></li></ul></li>
<li> Building Net-SNMP 64-bit with Visual C++ 2010 Express
<ul><li> <a href="http://www.net-snmp.org/wiki/index.php/Using_the_command_line_and_nmake_(VC++_2010_Express)" title="Using the command line and nmake (VC++ 2010 Express)">Using the command line and nmake (VC++ 2010 Express)</a></li></ul></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/Net-Snmp_on_Ubuntu" title="Net-Snmp on Ubuntu">Net-Snmp on Ubuntu</a></li>
<li> <a href="http://www.net-snmp.org/wiki/index.php/Net-SNMP_and_lm-sensors_on_Ubuntu_10.04" title="Net-SNMP and lm-sensors on Ubuntu 10.04">Net-SNMP and lm-sensors on Ubuntu 10.04</a></li>
<li> Net-SNMP for windows:
<ul><li> How to install: <a rel="nofollow" class="external autonumber" href="http://www.netadmintools.com/art487.html">[2]</a></li>
<li> How to configure: <a rel="nofollow" class="external autonumber" href="http://www.netadmintools.com/art488.html">[3]</a></li></ul></li></ul>

<!-- 
NewPP limit report
Cached time: 20240514175528
Cache expiry: 0
Dynamic content: true
CPU time usage: 0.023 seconds
Real time usage: 0.029 seconds
Preprocessor visited node count: 48/1000000
Preprocessor generated node count: 80/1000000
Post‐expand include size: 6432/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   10.302      1 - -total
 56.97%    5.869      1 - Template:TUT:File-Table-Top-and-basics
 40.80%    4.203      1 - Template:TUT:LIST
 24.94%    2.569      1 - Template:TUT:File-Table-Top
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://www.net-snmp.org/wiki/index.php?title=TUT:Writing_a_Dynamically_Loadable_Object&amp;oldid=4469">http://www.net-snmp.org/wiki/index.php?title=TUT:Writing_a_Dynamically_Loadable_Object&amp;oldid=4469</a>"</div>
					<div id='catlinks' class='catlinks catlinks-allhidden'></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-main" class="selected"><a href="http://www.net-snmp.org/wiki/index.php/TUT:Writing_a_Dynamically_Loadable_Object" title="View the content page [c]" accesskey="c">Page</a></li>
				<li id="ca-talk"><a href="http://www.net-snmp.org/wiki/index.php/Talk:TUT:Writing_a_Dynamically_Loadable_Object" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-viewsource"><a href="http://www.net-snmp.org/wiki/index.php?title=TUT:Writing_a_Dynamically_Loadable_Object&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
				<li id="ca-history"><a href="http://www.net-snmp.org/wiki/index.php?title=TUT:Writing_a_Dynamically_Loadable_Object&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="http://www.net-snmp.org/wiki/index.php?title=Special:UserLogin&amp;returnto=TUT%3AWriting+a+Dynamically+Loadable+Object&amp;returntoquery=oldid%3D4469&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="http://www.net-snmp.org/wiki/index.php?title=Special:UserLogin&amp;returnto=TUT%3AWriting+a+Dynamically+Loadable+Object&amp;returntoquery=oldid%3D4469" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="http://www.net-snmp.org/wiki/index.php/Main_Page" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-project" role="navigation">
		<h3>project</h3>
		<div class='pBody'>
							<ul>
											<li id="n-Web-Site"><a href="http://www.net-snmp.org/" rel="nofollow">Web Site</a></li>
											<li id="n-Wiki"><a href="http://www.net-snmp.org/wiki/index.php/Main_Page">Wiki</a></li>
											<li id="n-Download"><a href="http://www.net-snmp.org/download.html" rel="nofollow">download</a></li>
											<li id="n-Mailing-Lists"><a href="http://www.net-snmp.org/support/mailinglists.html" rel="nofollow">Mailing Lists</a></li>
											<li id="n-Bug-Reports"><a href="http://www.net-snmp.org/support/bugreports.html" rel="nofollow">Bug Reports</a></li>
											<li id="n-Patches"><a href="http://www.net-snmp.org/support/patches.html" rel="nofollow">Patches</a></li>
									</ul>
					</div>
		</div>
		<div class="generated-sidebar portlet" id="p-documentation" role="navigation">
		<h3>documentation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-Tutorials"><a href="http://www.net-snmp.org/wiki/index.php/Tutorials">Tutorials</a></li>
											<li id="n-FAQ"><a href="http://www.net-snmp.org/wiki/index.php/FAQ">FAQ</a></li>
											<li id="n-Good-Answers"><a href="http://www.net-snmp.org/wiki/index.php/Category:GoodAnswer">Good Answers</a></li>
											<li id="n-Manual-Pages"><a href="http://www.net-snmp.org/man" rel="nofollow">Manual Pages</a></li>
											<li id="n-Tools"><a href="http://www.net-snmp.org/wiki/index.php/Category:Tools">Tools</a></li>
									</ul>
					</div>
		</div>
		<div class="generated-sidebar portlet" id="p-wiki" role="navigation">
		<h3>wiki</h3>
		<div class='pBody'>
							<ul>
											<li id="n-recentchanges"><a href="http://www.net-snmp.org/wiki/index.php/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="http://www.net-snmp.org/wiki/index.php/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
											<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="http://www.net-snmp.org/wiki/index.php" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Net-SNMP Wiki [f]" accesskey="f" id="searchInput" />
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="http://www.net-snmp.org/wiki/index.php/Special:WhatLinksHere/TUT:Writing_a_Dynamically_Loadable_Object" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="http://www.net-snmp.org/wiki/index.php/Special:RecentChangesLinked/TUT:Writing_a_Dynamically_Loadable_Object" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="http://www.net-snmp.org/wiki/index.php/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-print"><a href="http://www.net-snmp.org/wiki/index.php?title=TUT:Writing_a_Dynamically_Loadable_Object&amp;oldid=4469&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											<li id="t-permalink"><a href="http://www.net-snmp.org/wiki/index.php?title=TUT:Writing_a_Dynamically_Loadable_Object&amp;oldid=4469" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="http://www.net-snmp.org/wiki/index.php?title=TUT:Writing_a_Dynamically_Loadable_Object&amp;action=info" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-poweredbyico">
									<a href="http://www.mediawiki.org/"><img src="http://www.net-snmp.org/wiki/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/wiki/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /wiki/resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a>
							</div>
					<ul id="f-list">
									<li id="lastmod"> This page was last modified on 11 August 2010, at 13:44.</li>
									<li id="privacy"><a href="http://www.net-snmp.org/wiki/index.php/Net-SNMP_Wiki:Privacy_policy" title="Net-SNMP Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="http://www.net-snmp.org/wiki/index.php/Net-SNMP_Wiki:About" title="Net-SNMP Wiki:About">About Net-SNMP Wiki</a></li>
									<li id="disclaimer"><a href="http://www.net-snmp.org/wiki/index.php/Net-SNMP_Wiki:General_disclaimer" title="Net-SNMP Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.state({"user":"ready","user.groups":"ready"});mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"]);
} );</script><script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgBackendResponseTime":176});
} );</script></body>
<!-- Mirrored from www.net-snmp.org/wiki/index.php?title=TUT:Writing_a_Dynamically_Loadable_Object&oldid=4469 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 May 2024 18:27:29 GMT -->
</html>
