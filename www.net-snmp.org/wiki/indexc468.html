

<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from www.net-snmp.org/wiki/index.php?title=MFD:ifTable:Get_Data&action=edit by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 May 2024 19:21:11 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>View source for MFD:ifTable:Get Data - Net-SNMP Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":0,"wgPageName":"MFD:ifTable:Get_Data","wgTitle":"MFD:ifTable:Get Data","wgCurRevisionId":5162,"wgRevisionId":0,"wgArticleId":2240,"wgIsArticle":!1,"wgIsRedirect":!1,"wgAction":"edit","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":!0,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"MFD:ifTable:Get_Data","wgRelevantArticleId":2240,"wgIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits"]);
} );</script>
<link rel="stylesheet" href="load34a1.css?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook" />
<!--[if IE 6]><link rel="stylesheet" href="/wiki/skins/MonoBook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/wiki/skins/MonoBook/IE70Fixes.css?303" media="screen" /><![endif]-->
<meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}</style>
<script async="" src="load3a95.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook"></script>
<meta name="generator" content="MediaWiki 1.26.3" />
<meta name="robots" content="noindex,nofollow" />
<link rel="shortcut icon" href="http://www.net-snmp.org/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="http://www.net-snmp.org/wiki/opensearch_desc.php" title="Net-SNMP Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://www.net-snmp.org/wiki/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Net-SNMP Wiki Atom feed" href="http://www.net-snmp.org/wiki/index.php?title=Special:RecentChanges&amp;feed=atom" />
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-MFD_ifTable_Get_Data skin-monobook action-edit">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">View source for MFD:ifTable:Get Data</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Net-SNMP Wiki</div>
					<div id="contentSub">‚Üê <a href="http://www.net-snmp.org/wiki/index.php/MFD:ifTable:Get_Data" title="MFD:ifTable:Get Data">MFD:ifTable:Get Data</a></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text"><p>You do not have permission to edit this page, for the following reason:
</p>
<div class="permissions-errors">
<p>The action you have requested is limited to users in the group: <a href="http://www.net-snmp.org/wiki/index.php?title=Net-SNMP_Wiki:Users&amp;action=edit&amp;redlink=1" class="new" title="Net-SNMP Wiki:Users (page does not exist)">Users</a>.
</p>
</div>
<hr />
<p>You can view and copy the source of this page.
</p><textarea readonly="" accesskey="," id="wpTextbox1" cols="80" rows="25" style="" lang="en" dir="ltr" name="wpTextbox1">{{MFDTutorial}}

== MFD : ifTable data GET ==

Once the correct table context has been found, the individual node
get routines will be called. These are generated in the file
''ifTable_data_get.c''. 

Because we used the ''data context'' that is generated by
default, we populated the data in the data structure during
the data access phase and our MIB only has simple data types, 
the code which was generated for the get routines does not need
much modification.


=== Implementing the get routines ===

There is, however, a case where the data format specified by the
MIB does not match the data format we got from our datastore. The
''ifType'' enumerations need to be mapped from the
Linux specific ARPHDR values. Here again, we haven't tried to
provide a complete implementation, but enought to give you the
an overview.

==== ifType mapping ====

The PhysAddr ioctl call provides us with an ARPHRD type for
an interface. This type must be mapped to one of the valid
IANAifType enumerated values. The file ''ifTable_enums.h''
contains macro definitions for all the allow values. It also
contains a list of the same macros prefixed with 'INTERNAL_'. For
the case where there is a one to one mapping between a MIB type
and the implementation's type, this provides a way to map
without having to update the code.

Unfortunately, the ifType isn't one of those cases. Only a
small subset of the possible values are available in our
implementation, and often there are several ARPHDR types that
map to a single IANAifType. The first step is to whittle down
the internal list to the ones with a direct mapping that we are
going to support.

&lt;table>&lt;tr>&lt;td>&lt;/td>&lt;td bgcolor=CCCCCC>
 /*
 * TODO:
 * value mapping (see notes at top of file)
 */&lt;font color=blue>
 #define INTERNAL_IANAIFTYPE_ETHERNETCSMACD  ARPHRD_ETHER
 #define INTERNAL_IANAIFTYPE_FDDI  ARPHRD_FDDI
 #define INTERNAL_IANAIFTYPE_PPP  ARPHRD_PPP
 #define INTERNAL_IANAIFTYPE_SOFTWARELOOPBACK  ARPHRD_LOOPBACK
 #define INTERNAL_IANAIFTYPE_SLIP  ARPHRD_SLIP
 #define INTERNAL_IANAIFTYPE_ARCNET  ARPHRD_ARCNET
 #ifdef ARPHRD_ATM
 #define INTERNAL_IANAIFTYPE_ATM  ARPHRD_ATM
 #endif
 #define INTERNAL_IANAIFTYPE_LOCALTALK  ARPHRD_LOCALTLK
 #ifdef ARPHRD_HIPPI
 #define INTERNAL_IANAIFTYPE_HIPPI  ARPHRD_HIPPI
 #endif
 #define INTERNAL_IANAIFTYPE_TUNNEL  ARPHRD_TUNNEL&lt;/font>
&lt;/td>&lt;/tr>&lt;/table>

Then we update the implementation to remove all the extras,
and use a default of 'other' for any unknown types.

&lt;table>&lt;tr>&lt;td>&lt;/td>&lt;td bgcolor=CCCCCC>
 int
 ifType_map(u_long * mib_ifType_val_ptr, u_long raw_ifType_val)
 {
 netsnmp_assert(NULL != mib_ifType_val_ptr);
 
 DEBUGMSGTL(("verbose:ifType_map", "called\n"));
 
 /*
 * TODO:
 * value mapping
 */
 /** TODO: update INTERNAL_* macros defined in the header */
 switch (raw_ifType_val) {
 case INTERNAL_IANAIFTYPE_ETHERNETCSMACD:
 (*mib_ifType_val_ptr) = IANAIFTYPE_ETHERNETCSMACD;
 break;
 case INTERNAL_IANAIFTYPE_TUNNEL:&lt;font color=blue>
 case ARPHRD_TUNNEL6:
 #ifdef ARPHRD_IPGRE
 case ARPHRD_IPGRE:
 #endif
 case ARPHRD_SIT:&lt;/font>
 (*mib_ifType_val_ptr) = IANAIFTYPE_TUNNEL;
 break;          /* tunnel */&lt;font color=blue>
 case ARPHRD_CSLIP:
 case ARPHRD_SLIP6:
 case ARPHRD_CSLIP6:&lt;/font>
 case INTERNAL_IANAIFTYPE_SLIP:
 (*mib_ifType_val_ptr) = IANAIFTYPE_SLIP;
 break;          /* slip */
 case INTERNAL_IANAIFTYPE_PPP:
 (*mib_ifType_val_ptr) = IANAIFTYPE_PPP;
 break;          /* ppp */
 case INTERNAL_IANAIFTYPE_SOFTWARELOOPBACK:
 (*mib_ifType_val_ptr) = IANAIFTYPE_SOFTWARELOOPBACK;
 break;          /* softwareLoopback */
 case INTERNAL_IANAIFTYPE_FDDI:
 (*mib_ifType_val_ptr) = IANAIFTYPE_FDDI;
 break;
 case INTERNAL_IANAIFTYPE_ARCNET:
 (*mib_ifType_val_ptr) = IANAIFTYPE_ARCNET;
 break;
 case INTERNAL_IANAIFTYPE_LOCALTALK:
 (*mib_ifType_val_ptr) = IANAIFTYPE_LOCALTALK;
 break;&lt;font color=blue>
 #ifdef INTERNAL_IANAIFTYPE_HIPPI&lt;/font>
 case INTERNAL_IANAIFTYPE_HIPPI:
 (*mib_ifType_val_ptr) = IANAIFTYPE_HIPPI;
 break;&lt;font color=blue>
 #endif
 #ifdef INTERNAL_IANAIFTYPE_ATM&lt;/font>
 case INTERNAL_IANAIFTYPE_ATM:
 (*mib_ifType_val_ptr) = IANAIFTYPE_ATM;
 break;&lt;font color=blue>
 #endif
 /*
 * XXX: more if_arp.h:ARPHDR_xxx to IANAifType mappings... 
 */
 
 default:
 snmp_log(LOG_ERR, "couldn't map value %d for ifType\n",
 raw_ifType_val);
 (*mib_ifType_val_ptr) = IANAIFTYPE_OTHER;&lt;/font>
 }
 
 return MFD_SUCCESS;
 }
&lt;/td>&lt;/tr>&lt;/table>

=== Unimplemented columns ===

As mentioned before, we are leaving some colums unimplemented.
There are several reasons a column might be left unimplemnted.
The data may not be available, or a particular column might not
make sense for an implementation.

We omitted some columns from the valid columns structure, because
we don't want to provide data for those columns, ever. If you have
columns that might have data, depending on the row, then those
columns should be in the valid columns structure. When the column
get routine is called for a row which had not data for the column,
simply return ''MFD_SKIP'' from the object's
get routine, and the agent will move on to the next object.

You should also consult your MIB to see if, for a particular column
for which you don't have data, a special value is specified which
should be returned when the data isn't available. For example,
the ifPhysAddress object states:
''For interfaces which do not have such an address (e.g., a serial
line), this object should contain an octet string of zero length.''

==== Skipping ifMtu ====

Even though we've eliminated some columns from the valid columns, here
is a simple example if skipping a column:

&lt;table>&lt;tr>&lt;td>&lt;/td>&lt;td bgcolor=CCCCCC>
 int
 ifMtu_get(ifTable_rowreq_ctx * rowreq_ctx, long *ifMtu_ptr)
 {
 /** we should have a non-NULL pointer */
 netsnmp_assert(NULL != ifMtu_ptr);
 
 netsnmp_assert(NULL != rowreq_ctx);
 
 /*
 * TODO:
 * set (* ifMtu_ptr ) from rowreq_ctx->data.
 */
 /*
 * TODO:
 * update, replace or delete, if needed.
 */&lt;font color=blue>
 if (rowreq_ctx->data.ifMtu == 0)
 return MFD_SKIP;
 &lt;/font>
 (*ifMtu_ptr) = rowreq_ctx->data.ifMtu;
 
 return MFD_SUCCESS;
 }
&lt;/td>&lt;/tr>&lt;/table>
</textarea><div class="templatesUsed"><div class="mw-templatesUsedExplanation"><p>Template used on this page:
</p></div><ul>
<li><a href="http://www.net-snmp.org/wiki/index.php/Template:MFDTutorial" title="Template:MFDTutorial">Template:MFDTutorial</a> (<a href="http://www.net-snmp.org/wiki/index.php?title=Template:MFDTutorial&amp;action=edit" title="Template:MFDTutorial">view source</a>) </li></ul></div><p id="mw-returnto">Return to <a href="http://www.net-snmp.org/wiki/index.php/MFD:ifTable:Get_Data" title="MFD:ifTable:Get Data">MFD:ifTable:Get Data</a>.</p>
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://www.net-snmp.org/wiki/index.php/MFD:ifTable:Get_Data">http://www.net-snmp.org/wiki/index.php/MFD:ifTable:Get_Data</a>"</div>
					<div id='catlinks' class='catlinks catlinks-allhidden'></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-main" class="selected"><a href="http://www.net-snmp.org/wiki/index.php/MFD:ifTable:Get_Data" title="View the content page [c]" accesskey="c">Page</a></li>
				<li id="ca-talk" class="new"><a href="http://www.net-snmp.org/wiki/index.php?title=Talk:MFD:ifTable:Get_Data&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-viewsource" class="selected"><a href="http://www.net-snmp.org/wiki/index.php?title=MFD:ifTable:Get_Data&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
				<li id="ca-history"><a href="http://www.net-snmp.org/wiki/index.php?title=MFD:ifTable:Get_Data&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="http://www.net-snmp.org/wiki/index.php?title=Special:UserLogin&amp;returnto=MFD%3AifTable%3AGet+Data&amp;returntoquery=action%3Dedit&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="http://www.net-snmp.org/wiki/index.php?title=Special:UserLogin&amp;returnto=MFD%3AifTable%3AGet+Data&amp;returntoquery=action%3Dedit" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="http://www.net-snmp.org/wiki/index.php/Main_Page" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-project" role="navigation">
		<h3>project</h3>
		<div class='pBody'>
							<ul>
											<li id="n-Web-Site"><a href="http://www.net-snmp.org/" rel="nofollow">Web Site</a></li>
											<li id="n-Wiki"><a href="http://www.net-snmp.org/wiki/index.php/Main_Page">Wiki</a></li>
											<li id="n-Download"><a href="http://www.net-snmp.org/download.html" rel="nofollow">download</a></li>
											<li id="n-Mailing-Lists"><a href="http://www.net-snmp.org/support/mailinglists.html" rel="nofollow">Mailing Lists</a></li>
											<li id="n-Bug-Reports"><a href="http://www.net-snmp.org/support/bugreports.html" rel="nofollow">Bug Reports</a></li>
											<li id="n-Patches"><a href="http://www.net-snmp.org/support/patches.html" rel="nofollow">Patches</a></li>
									</ul>
					</div>
		</div>
		<div class="generated-sidebar portlet" id="p-documentation" role="navigation">
		<h3>documentation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-Tutorials"><a href="http://www.net-snmp.org/wiki/index.php/Tutorials">Tutorials</a></li>
											<li id="n-FAQ"><a href="http://www.net-snmp.org/wiki/index.php/FAQ">FAQ</a></li>
											<li id="n-Good-Answers"><a href="http://www.net-snmp.org/wiki/index.php/Category:GoodAnswer">Good Answers</a></li>
											<li id="n-Manual-Pages"><a href="http://www.net-snmp.org/man" rel="nofollow">Manual Pages</a></li>
											<li id="n-Tools"><a href="http://www.net-snmp.org/wiki/index.php/Category:Tools">Tools</a></li>
									</ul>
					</div>
		</div>
		<div class="generated-sidebar portlet" id="p-wiki" role="navigation">
		<h3>wiki</h3>
		<div class='pBody'>
							<ul>
											<li id="n-recentchanges"><a href="http://www.net-snmp.org/wiki/index.php/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="http://www.net-snmp.org/wiki/index.php/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
											<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="http://www.net-snmp.org/wiki/index.php" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Net-SNMP Wiki [f]" accesskey="f" id="searchInput" />
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="http://www.net-snmp.org/wiki/index.php/Special:WhatLinksHere/MFD:ifTable:Get_Data" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="http://www.net-snmp.org/wiki/index.php/Special:RecentChangesLinked/MFD:ifTable:Get_Data" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="http://www.net-snmp.org/wiki/index.php/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-info"><a href="http://www.net-snmp.org/wiki/index.php?title=MFD:ifTable:Get_Data&amp;action=info" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-poweredbyico">
									<a href="http://www.mediawiki.org/"><img src="http://www.net-snmp.org/wiki/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/wiki/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /wiki/resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a>
							</div>
					<ul id="f-list">
									<li id="privacy"><a href="http://www.net-snmp.org/wiki/index.php/Net-SNMP_Wiki:Privacy_policy" title="Net-SNMP Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="http://www.net-snmp.org/wiki/index.php/Net-SNMP_Wiki:About" title="Net-SNMP Wiki:About">About Net-SNMP Wiki</a></li>
									<li id="disclaimer"><a href="http://www.net-snmp.org/wiki/index.php/Net-SNMP_Wiki:General_disclaimer" title="Net-SNMP Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.state({"user":"ready","user.groups":"ready"});mw.loader.load(["mediawiki.action.edit.collapsibleFooter","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"]);
} );</script><script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgBackendResponseTime":136});
} );</script></body>
<!-- Mirrored from www.net-snmp.org/wiki/index.php?title=MFD:ifTable:Get_Data&action=edit by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 May 2024 19:21:11 GMT -->
</html>
