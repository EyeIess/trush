

<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from www.net-snmp.org/wiki/index.php?title=TUT:SNMPv3_Options&action=edit by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 May 2024 18:22:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>View source for TUT:SNMPv3 Options - Net-SNMP Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":0,"wgPageName":"TUT:SNMPv3_Options","wgTitle":"TUT:SNMPv3 Options","wgCurRevisionId":5684,"wgRevisionId":0,"wgArticleId":1739,"wgIsArticle":!1,"wgIsRedirect":!1,"wgAction":"edit","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":!0,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"TUT:SNMPv3_Options","wgRelevantArticleId":1739,"wgIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits"]);
} );</script>
<link rel="stylesheet" href="load34a1.css?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook" />
<!--[if IE 6]><link rel="stylesheet" href="/wiki/skins/MonoBook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/wiki/skins/MonoBook/IE70Fixes.css?303" media="screen" /><![endif]-->
<meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}</style>
<script async="" src="load3a95.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook"></script>
<meta name="generator" content="MediaWiki 1.26.3" />
<meta name="robots" content="noindex,nofollow" />
<link rel="shortcut icon" href="http://www.net-snmp.org/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="http://www.net-snmp.org/wiki/opensearch_desc.php" title="Net-SNMP Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://www.net-snmp.org/wiki/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Net-SNMP Wiki Atom feed" href="http://www.net-snmp.org/wiki/index.php?title=Special:RecentChanges&amp;feed=atom" />
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-TUT_SNMPv3_Options skin-monobook action-edit">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">View source for TUT:SNMPv3 Options</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Net-SNMP Wiki</div>
					<div id="contentSub">‚Üê <a href="http://www.net-snmp.org/wiki/index.php/TUT:SNMPv3_Options" title="TUT:SNMPv3 Options">TUT:SNMPv3 Options</a></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text"><p>You do not have permission to edit this page, for the following reason:
</p>
<div class="permissions-errors">
<p>The action you have requested is limited to users in the group: <a href="http://www.net-snmp.org/wiki/index.php?title=Net-SNMP_Wiki:Users&amp;action=edit&amp;redlink=1" class="new" title="Net-SNMP Wiki:Users (page does not exist)">Users</a>.
</p>
</div>
<hr />
<p>You can view and copy the source of this page.
</p><textarea readonly="" accesskey="," id="wpTextbox1" cols="80" rows="25" style="" lang="en" dir="ltr" name="wpTextbox1">== SNMPv3 Options ==

=== Introduction ===

The 3rd version of the SNMP protocol introduced a whole slew of new security related features that have been missing from the previous versions. In SNMPv1 and SNMPv2c, a simple community string was put in clear text into the packet to authenticate the request. This is obviously highly insecure. (If it's not obvious, then just trust me). 

=== SNMPv3 and Security Components ====

SNMPv3 introduces advanced security which splits the authentication and the authorization into two pieces: 

==== User-Based Security ====

The USM is the default Security Module for SNMPv3. The U stands for User-based, as it contains a list of users and their attributes. The USM is described by [[rfc:2574|RFC 2574]].

==== TLS and DTLS Based Security ====

A newer security model is also available called the "Transport Security Model" (TSM), defined in [[rfc:5591|RFC 5591]] which is designed to work with secure transports like TLS or DTLS and its usage is documented in the [[TUT:Using TLS|Using TLS tutorial]].

==== Authorization: Who can do what? ====

The VACM is the default Access Control Module and determines which users (and SNMPv1/v2c communities) are allowed to access MIB information.  The V stands for View-based, and allows different levels of access for different sections of the MIB tree. The VACM is described by RFC 2575. 

This document will discuss how to use the net-snmp tools to get and set data from a remote host.

=== Users ===

A user's profile contains the following data: 

  % '''snmptranslate -Tp -IR usmUserTable'''
  +--usmUserTable(2)
     |
     +--usmUserEntry(1)
        |
        +-- ---- String    usmUserEngineID(1)
        |        Textual Convention: SnmpEngineID
        |        Size: 5..32
        +-- ---- String    usmUserName(2)
        |        Textual Convention: SnmpAdminString
        |        Size: 1..32
        +-- -R-- String    usmUserSecurityName(3)
        |        Textual Convention: SnmpAdminString
        |        Size: 0..255
        +-- CR-- ObjID     usmUserCloneFrom(4)
        |        Textual Convention: RowPointer
        +-- CR-- ObjID     usmUserAuthProtocol(5)
        |        Textual Convention: AutonomousType
        +-- CR-- String    usmUserAuthKeyChange(6)
        |        Textual Convention: KeyChange
        +-- CR-- String    usmUserOwnAuthKeyChange(7)
        |        Textual Convention: KeyChange
        +-- CR-- ObjID     usmUserPrivProtocol(8)
        |        Textual Convention: AutonomousType
        +-- CR-- String    usmUserPrivKeyChange(9)
        |        Textual Convention: KeyChange
        +-- CR-- String    usmUserOwnPrivKeyChange(10)
        |        Textual Convention: KeyChange
        +-- CR-- String    usmUserPublic(11)
        |        Size: 0..32
        +-- CR-- EnumVal   usmUserStorageType(12)
        |        Textual Convention: StorageType
        |        Values: other(1), volatile(2), nonVolatile(3), permanent(4), readOnly(5)
        +-- CR-- EnumVal   usmUserStatus(13)
                 Textual Convention: RowStatus
                 Values: active(1), notInService(2), notReady(3), createAndGo(4), createAndWait(5), destroy(6)


Well, that's nice but what does it mean? 

To summarize, most importantly each user has a name (called a '''securityName''') an authentication type ('''authProtocol''') and a privacy type ('''privProtocol''') as well as associated keys for each of these ('''authKey''' and '''privKey'''). 

Authentication is performed by using a user's '''authKey''' to sign the message being sent. The '''authProtocol''' can be either ''MD5'' or ''SHA'' at this time. '''authKeys''' (and '''privKeys''') are generated from a passphrase that must be at least 8 characters in length. 

Encryption is performed by using a user's '''privKey''' to encrypt the data portion of the message being sent. The '''privProtocol''' can be either ''AES'' or ''DES''. 

Messages can be sent unauthenticated and unencrypted (noAuthNoPriv), authenticated but unencrypted (authNoPriv), or authenticated and encrypted (authPriv) by setting the '''securityLevel''' to use. 

All of this information is passed to commands using the command line arguments described in the table below. Additionally, you can put default values in your ~/.snmp/snmp.conf files using the tokens specified in the 3rd column. 

{| border=1
!Parameter
!Command Line Flag
!snmp.conf token
|-
| securityName || -u NAME || defSecurityName NAME
|-
| authProtocol || -a &lt;nowiki>(MD5|SHA)&lt;/nowiki> || defAuthType &lt;nowiki>(MD5|SHA)&lt;/nowiki>
|-
| privProtocol || -x &lt;nowiki>(AES|DES)&lt;/nowiki> || defPrivType DES
|-
| authKey || -A PASSPHRASE || defAuthPassphrase PASSPHRASE
|-
| privKey || -X PASSPHRASE || defPrivPassphrase PASSPHRASE
|-
| securityLevel || -l &lt;nowiki>(noAuthNoPriv|authNoPriv|authPriv)&lt;/nowiki> || defSecurityLevel &lt;nowiki>(noAuthNoPriv|authNoPriv|authPriv)&lt;/nowiki>
|-
| context || -n CONTEXTNAME || defContext CONTEXTNAME
|}

=== Examples ===
==== Configuration ====
The following examples use the Net-SNMP test agent. If you would like to test against your local machine, you can configure the same SNMPv3 users on your machine.

* edit your snmpd.conf and add
 rouser noAuthUser
 rouser MD5User
 rwuser MD5DESUser
* stop snmpd and edit your persistent snmpd.conf and add
 createUser NoAuthUser
 createUser MD5User MD5 "The Net-SNMP Demo Password"
 createUser MD5DESUser MD5 "The Net-SNMP Demo Password" DES
* start snmpd again.

==== Commands ====
Here is a completely unauthenticated request (which still needs a user name, nonetheless): 

  % '''snmpgetnext -v 3 -n "" -u noAuthUser -l noAuthNoPriv test.net-snmp.org sysUpTime'''
  system.sysUpTime.0 = Timeticks: (83467131) 9 days, 15:51:11.31


Here is an authenticated request: 

  % '''snmpgetnext -v 3 -n "" -u MD5User -a MD5 -A "The Net-SNMP Demo Password" -l authNoPriv test.net-snmp.org sysUpTime'''
  system.sysUpTime.0 = Timeticks: (83491735) 9 days, 15:55:17.35


And finally, here is an authenticated and encrypted request: 

  % '''snmpgetnext -v 3 -n "" -u MD5DESUser -a MD5 -A "The Net-SNMP Demo Password" -x DES -X "The Net-SNMP Demo Password" -l authPriv test.net-snmp.org system'''
  system.sysUpTime.0 = Timeticks: (83493111) 9 days, 15:55:31.11

Of course, they don't look much different since they all worked identically. But, the host above allows us to look at it using any level of authentication. Any hosts you set up should be more restricted than that and require at least a level of authNoPriv when you configure the VACM access control. 

Finally, consider a snmp.conf file that looks like this: 

  defContext none
  defSecurityName MD5User
  defAuthPassphrase The Net-SNMP Demo Password
  defVersion 3
  defAuthType MD5
  defSecurityLevel authNoPriv

This sets up the defaults for you so that your snmp commands can boil down to something as simple as: 

  % '''snmpgetnext test.net-snmp.org sysUpTime'''
  system.sysUpTime.3.0 = Timeticks: (83517052) 9 days, 15:59:30.52

Or: 

  % '''snmpset test.net-snmp.org ucdDemoPublicString.0 s "I changed  something"'''
  enterprises.ucdavis.ucdDemoMIB.ucdDemoMIBObjects.ucdDemoPublic.ucdDemoPublicString.2.0 = "I changed something"

Then: 

  % '''snmpget test.net-snmp.org ucdDemoPublicString.0'''
  enterprises.ucdavis.ucdDemoMIB.ucdDemoMIBObjects.ucdDemoPublic.ucdDemoPublicString.2.0 = "I changed something"

{{TUT:LIST}}
</textarea><div class="templatesUsed"><div class="mw-templatesUsedExplanation"><p>Template used on this page:
</p></div><ul>
<li><a href="http://www.net-snmp.org/wiki/index.php/Template:TUT:LIST" title="Template:TUT:LIST">Template:TUT:LIST</a> (<a href="http://www.net-snmp.org/wiki/index.php?title=Template:TUT:LIST&amp;action=edit" title="Template:TUT:LIST">view source</a>) </li></ul></div><p id="mw-returnto">Return to <a href="http://www.net-snmp.org/wiki/index.php/TUT:SNMPv3_Options" title="TUT:SNMPv3 Options">TUT:SNMPv3 Options</a>.</p>
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://www.net-snmp.org/wiki/index.php/TUT:SNMPv3_Options">http://www.net-snmp.org/wiki/index.php/TUT:SNMPv3_Options</a>"</div>
					<div id='catlinks' class='catlinks catlinks-allhidden'></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-main" class="selected"><a href="http://www.net-snmp.org/wiki/index.php/TUT:SNMPv3_Options" title="View the content page [c]" accesskey="c">Page</a></li>
				<li id="ca-talk" class="new"><a href="http://www.net-snmp.org/wiki/index.php?title=Talk:TUT:SNMPv3_Options&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-viewsource" class="selected"><a href="http://www.net-snmp.org/wiki/index.php?title=TUT:SNMPv3_Options&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
				<li id="ca-history"><a href="http://www.net-snmp.org/wiki/index.php?title=TUT:SNMPv3_Options&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="http://www.net-snmp.org/wiki/index.php?title=Special:UserLogin&amp;returnto=TUT%3ASNMPv3+Options&amp;returntoquery=action%3Dedit&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="http://www.net-snmp.org/wiki/index.php?title=Special:UserLogin&amp;returnto=TUT%3ASNMPv3+Options&amp;returntoquery=action%3Dedit" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="http://www.net-snmp.org/wiki/index.php/Main_Page" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-project" role="navigation">
		<h3>project</h3>
		<div class='pBody'>
							<ul>
											<li id="n-Web-Site"><a href="http://www.net-snmp.org/" rel="nofollow">Web Site</a></li>
											<li id="n-Wiki"><a href="http://www.net-snmp.org/wiki/index.php/Main_Page">Wiki</a></li>
											<li id="n-Download"><a href="http://www.net-snmp.org/download.html" rel="nofollow">download</a></li>
											<li id="n-Mailing-Lists"><a href="http://www.net-snmp.org/support/mailinglists.html" rel="nofollow">Mailing Lists</a></li>
											<li id="n-Bug-Reports"><a href="http://www.net-snmp.org/support/bugreports.html" rel="nofollow">Bug Reports</a></li>
											<li id="n-Patches"><a href="http://www.net-snmp.org/support/patches.html" rel="nofollow">Patches</a></li>
									</ul>
					</div>
		</div>
		<div class="generated-sidebar portlet" id="p-documentation" role="navigation">
		<h3>documentation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-Tutorials"><a href="http://www.net-snmp.org/wiki/index.php/Tutorials">Tutorials</a></li>
											<li id="n-FAQ"><a href="http://www.net-snmp.org/wiki/index.php/FAQ">FAQ</a></li>
											<li id="n-Good-Answers"><a href="http://www.net-snmp.org/wiki/index.php/Category:GoodAnswer">Good Answers</a></li>
											<li id="n-Manual-Pages"><a href="http://www.net-snmp.org/man" rel="nofollow">Manual Pages</a></li>
											<li id="n-Tools"><a href="http://www.net-snmp.org/wiki/index.php/Category:Tools">Tools</a></li>
									</ul>
					</div>
		</div>
		<div class="generated-sidebar portlet" id="p-wiki" role="navigation">
		<h3>wiki</h3>
		<div class='pBody'>
							<ul>
											<li id="n-recentchanges"><a href="http://www.net-snmp.org/wiki/index.php/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="http://www.net-snmp.org/wiki/index.php/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
											<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="http://www.net-snmp.org/wiki/index.php" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Net-SNMP Wiki [f]" accesskey="f" id="searchInput" />
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="http://www.net-snmp.org/wiki/index.php/Special:WhatLinksHere/TUT:SNMPv3_Options" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="http://www.net-snmp.org/wiki/index.php/Special:RecentChangesLinked/TUT:SNMPv3_Options" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="http://www.net-snmp.org/wiki/index.php/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-info"><a href="http://www.net-snmp.org/wiki/index.php?title=TUT:SNMPv3_Options&amp;action=info" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-poweredbyico">
									<a href="http://www.mediawiki.org/"><img src="http://www.net-snmp.org/wiki/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/wiki/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /wiki/resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a>
							</div>
					<ul id="f-list">
									<li id="privacy"><a href="http://www.net-snmp.org/wiki/index.php/Net-SNMP_Wiki:Privacy_policy" title="Net-SNMP Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="http://www.net-snmp.org/wiki/index.php/Net-SNMP_Wiki:About" title="Net-SNMP Wiki:About">About Net-SNMP Wiki</a></li>
									<li id="disclaimer"><a href="http://www.net-snmp.org/wiki/index.php/Net-SNMP_Wiki:General_disclaimer" title="Net-SNMP Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.state({"user":"ready","user.groups":"ready"});mw.loader.load(["mediawiki.action.edit.collapsibleFooter","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"]);
} );</script><script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgBackendResponseTime":164});
} );</script></body>
<!-- Mirrored from www.net-snmp.org/wiki/index.php?title=TUT:SNMPv3_Options&action=edit by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 May 2024 18:22:17 GMT -->
</html>
