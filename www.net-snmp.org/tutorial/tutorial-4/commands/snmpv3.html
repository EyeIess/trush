
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  
<!-- Mirrored from www.net-snmp.org/tutorial/tutorial-4/commands/snmpv3.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 May 2024 19:16:49 GMT -->
<head>
    <title>Net-SNMP</title>

    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <meta http-equiv="Content-Language" content="en-us" />

    
    <meta name="description" content="Net-SNMP" />

    <meta name="author" content="Alex Burger" />

    <meta name="Rating" content="General" />

    <meta name="Keywords" content="net-snmp,ucd-snmp,netsnmp,ucdsnmp,snmp,snmp trap,trap,trap receiver,alert,network alert,network trouble,network downtime,snmp.conf,snmpd.conf,snmptrapd.conf,agentx.conf" />
    <link rel="StyleSheet" type="text/css" href="../../../layout1.css" />
    <link rel="StyleSheet" media="print,projection" type="text/css" href="../../../print1.css" />
  </head>
  <body background="../../../images/net-snmp-bg2.jpg">
   
    <div id="Header">
      <!-- slogan -->
      <div class="HeaderSmall" align="right"><br /><br /><i>Current release: 5.9.2</i></div>
    </div>

    <div id="HeaderMap">
      <map name="logo" id="logo">
        <area alt="Logo" shape="rect" coords="0,0,2000,40" href="../../../logo.html" title="Click here for details about the original Net-SNMP / UCD-SNMP logo"></area>
      </map>
      <img align="left" vspace="0" hspace="0" width="100%" height="40" border="0" src="../../../images/blank3.gif" alt="Logo" usemap="#logo"/> <br />
    </div>

    <div id="Header2">
      <map name="homepage" id="homepage">
        <area alt="Home page" shape="rect" coords="0,0,130,30" href="../../../index.html"></area>
      </map>
      <img align="left" vspace="0" hspace="0" width="130" height="30" border="0" src="../../../images/logos/logo1_65_tr_small.gif" alt="Net-SNMP" usemap="#homepage"/> <br />
    </div>

    
    <div id="LeftSide">
      <div id="skip"><a href="#Content">skip to page content</a><br /><br /></div>
      <div id="Menu">

        <!-- <a href="/" >Home</a><br /> -->

        <a href="../../../index.html">About</a><br />
        

        <a href="../../../download.html" title="Download Net-SNMP binaries and source code">Download</a><br />

        <a href="../../../wiki/index.php/Tutorials.html" >Tutorials</a><br />
        
        <div id = "MenuSub">
          <table>
            <tr><td>&nbsp;&middot;</td><td><a href="../../tutorial-5/index.html"
                  title="Net-SNMP v5 tutorial">Version 5.x</a></td></tr>
            <tr><td>&nbsp;&middot;</td><td><a href="../index.html"
                  title="UCD-SNMP v4 tutorial">Version 4.x</a></td></tr>
          </table>
        </div>
        

        <a href="../../../docs/readmefiles.html">Documentation</a><br />
        

        <a href="../../../wiki/index.html" title="Net-SNMP Wiki">Wiki</a><br />

        <a href="../../../support/contacts.html" >Support</a><br />
        

        <a href="../../../dev/projects.html">Development</a><br />
        

        <a href="../../../related.html" title="Links to Net-SNMP related information and software">Related Info/SW</a><br />

        <br />
      </div>
      <br />

      <div id="ListSearch">
          <form method="post" action="http://sourceforge.net/search/">
          <span class="small">Archive Search:</span>
       
          <select name="forum_id">
            <option value="4959">Users</option>
            <option value="7152">Coders</option>
            <option value="12455">Announce</option>
            <option value="7153">Bugs</option>
            <option value="7151">Patches</option>
            <option value="33108">SVN (named "CVS")</option>
          </select>
       
          <input type="hidden" name="type_of_search" value="mlists" />
          <input type="hidden" name="group_id" value="12694" />
          <input type="text" name="words" size=15 id="Words" value="" /><br />
          <input type="submit" name="Search" value="Search" /><br />
          <input type="checkbox" name="exact" value="1" checked />
          <span id="Label">Require all words?</span>   
        </form>
      </div>
      <br />

      <div id="SiteSearch">
          <form method=GET action="http://www.google.com/search">
          <span class="small">Site Search:</span>
          
          <input type=hidden name=ie value=UTF-8>
          <input type=hidden name=oe value=UTF-8>
          <input type="text" name=q size=15 maxlength=255 value="" /><br />
          <input type=hidden name=sitesearch value="www.net-snmp.org">
          <input type=submit name=btnG VALUE="Google Search">
          <a href="http://www.google.com/">
            <img src="../../../../www.google.com/logos/Logo_25wht.gif" border="0" alt="Google" align="absmiddle"></A>

        </form>
      </div>


      
      <div id="MenuSFLogo">
        <a href="http://www.sourceforge.net/projects/net-snmp" target="sourceforge" title="Net-SNMP SourceForge project page"> <img src="http://sflogo.sourceforge.net/sflogo.php?group_id=12694&amp;type=2" width="125" height="37" border="0" alt="SourceForge.net Net-SNMP Project" /></a>
        
      </div>
  </div>
    
  <div id="Content">


<!-- CONTENT START -->
    <h1>UCD-SNMP Tutorial -- SNMPv3 Options</h1>
    <p>
      <b>Note:</b>  Much of this tutorial requires <a
	href="http://prdownloads.sourceforge.net/net-snmp/ucd-snmp-4.2.6.tar.gz">ucd-snmp-4.2.2 or higher</a>!,
	so make sure you get it before running the commands found in
	this tutorial.</b> 
      <p><b>Note:</b>  A new tutorial for net-snmp 5.0 and above <a
      href="../../../tutorial-5/index.html">is available</a> as well.  The commands is
      the ucd-snmp specific tutorial will not work as expected if you
      are using net-snmp and not ucd-snmp.
      <br><br>
    <hr>
    <h2>Introduction</h2>
    <p>
      The 3rd version of the SNMP protocol introduced a whole slew of
      new security related features that have been missing from the
      previous versions.  In SNMPv1 and SNMPv2c, a simple community
      string was put in clear text into the packet to authenticate the 
      request.  This is obviously highly insecure.  (If its not
      obvious, then just trust me).
    <p>
      SNMPv3 introduces advanced security which splits the
      authentication and the authorization into two pieces:
    <ul>

      <li> The USM is the default <i>Security Module</i> for SNMPv3.
      The <i>U</i> stands for <i>User-based</i>, as it is contains a
      list of users and their attributes.  The USM is described by <a
      href="ftp://ftp.ietf.org/rfc/rfc2574.txt">RFC 2574</a>.

      <li>The VACM is the default default <i>Access Control Module</i>
      and determines which users (and SNMPv1/v2c communities)
      are allowed to access MIB information.  The <i>I</i> stands for
      <i>View-based</i>, and allows different levels of access for
      different sections of the MIB tree.  The VACM is described by <a
      href="ftp://ftp.ietf.org/rfc/rfc2575.txt">RFC 2575</a>.

    </ul>
      
    <p>
      This document will discuss how to use the ucd-snmp tools to get
      and set data from a remote host.
    <h2>Users</h2>
    A user's profile contains the following data:
<pre>
<ul>
% <b>snmptranslate -Tp -IR usmUserTable</b>
+--usmUserTable(2)
   |
   +--usmUserEntry(1)
      |
      +-- ---- String    usmUserEngineID(1)
      |        Textual Convention: SnmpEngineID
      |        Size: 5..32
      +-- ---- String    usmUserName(2)
      |        Textual Convention: SnmpAdminString
      |        Size: 1..32
      +-- -R-- String    usmUserSecurityName(3)
      |        Textual Convention: SnmpAdminString
      |        Size: 0..255
      +-- CR-- ObjID     usmUserCloneFrom(4)
      |        Textual Convention: RowPointer
      +-- CR-- ObjID     usmUserAuthProtocol(5)
      |        Textual Convention: AutonomousType
      +-- CR-- String    usmUserAuthKeyChange(6)
      |        Textual Convention: KeyChange
      +-- CR-- String    usmUserOwnAuthKeyChange(7)
      |        Textual Convention: KeyChange
      +-- CR-- ObjID     usmUserPrivProtocol(8)
      |        Textual Convention: AutonomousType
      +-- CR-- String    usmUserPrivKeyChange(9)
      |        Textual Convention: KeyChange
      +-- CR-- String    usmUserOwnPrivKeyChange(10)
      |        Textual Convention: KeyChange
      +-- CR-- String    usmUserPublic(11)
      |        Size: 0..32
      +-- CR-- EnumVal   usmUserStorageType(12)
      |        Textual Convention: StorageType
      |        Values: other(1), volatile(2), nonVolatile(3), permanent(4), readOnly(5)
      +-- CR-- EnumVal   usmUserStatus(13)
               Textual Convention: RowStatus
               Values: active(1), notInService(2), notReady(3), createAndGo(4), createAndWait(5), destroy(6)
</ul>
</pre>
    <p> Well, thats nice but what does it mean?

    <p>
      To summarize the most importantly each user has a name (called
      a <b>securityName</b>) an authentication type
      (<b>authProtocol</b>) and a privacy type (<b>privProtocol</b>)
      as well as associated keys for each of these (<b>authKey</b> and 
      <b>privKey</b>).
    <p>
      Authentication is performed by using a users <b>authKey</b> to
      sign the message being sent.  The <b>authProtocol</b> can be
      either <i>MD5</i> or <i>SHA</i> at this time.  <b>authKey</b>s
      (and <b>privKey</b>s) are generated from a passphrase that must
      be at least 8 characters in length.
    <p>
      Authentication is performed by using a users <b>privKey</b> to
      encrypt the data portion the message being sent.  The
      <b>privProtocol</b> can only be <i>DES</i> at this time. 
    <p>
      Messages can be be sent unauthenticated, authenticated, or
      authenticated and encrypted by setting the <b>securityLevel</b>
      to use.
    <p>
      All of this information is passed to commands using the command
      line arguments described in the table below.  Additionally, you
      can put default values in your ~/.snmp/snmp.conf files using the 
      tokens specified in the 3rd column.
      <center>
      <table border=1 bgcolor="#d0d0ff">
	<tr bgcolor="#d0ffd0"><th>Parameter</th><th>Command Line Flag</th><th>snmp.conf token</th></tr>
	<tr><td>securityName</td><td>-u <i>NAME</i></td><td>defSecurityName NAME</td></tr>
	<tr><td>authProtocol</td><td>-a <i>(MD5|SHA)</i></td><td>defAuthType (MD5|SHA)</td></tr>
	<tr><td>privProtocol</td><td>-x <i>DES</i></td><td>defPrivType DES</td></tr>
	<tr><td>authKey</td><td>-A <i>PASSPHRASE</i></td><td>defAuthPassphrase PASSPHRASE</td></tr>
	<tr><td>privKey</td><td>-X <i>PASSPHRASE</i></td><td>defPrivPassphrase PASSPHRASE</td></tr>
	<tr><td>securityLevel</td><td>-l <i>(noAuthNoPriv|authNoPriv|authPriv)</i></td><td>defSecurityLevel (noAuthNoPriv|authNoPriv|authPriv)</td></tr>
	<tr><td>context</td><td>-n <i>CONTEXTNAME</i></td><td>defContext CONTEXTNAME</td></tr>
      </table>
      </center>
      <h2>Examples</h2>
    <p> Here is a completely unauthenticated request (which still
    needs a user name, none the less):
<pre>
<ul>
% <b>snmpgetnext -v 3 -n none -u noAuthUser -l noAuthNoPriv test.net-snmp.org sysUpTime</b>
system.sysUpTime.0 = Timeticks: (83467131) 9 days, 15:51:11.31
</ul>
</pre>

    <p> Here is a authenticated request:
<pre>
<ul>
% <b>snmpgetnext -v 3 -n none -u MD5User -a MD5 -A "The UCD Demo Password" -l authNoPriv test.net-snmp.org sysUpTime</b>
system.sysUpTime.0 = Timeticks: (83491735) 9 days, 15:55:17.35
</ul>
</pre>

    <p> And finally, here is an authenticated and encrypted request:
<pre>
<ul>
% <b>snmpgetnext -v 3 -n none -u MD5DESUser -a MD5 -A "The UCD Demo Password" -x DES -X "The UCD Demo Password" -l authPriv test.net-snmp.org system</b>
system.sysUpTime.0 = Timeticks: (83493111) 9 days, 15:55:31.11
</ul>
</pre>
    <p> Of course, they don't look much different since they all
    worked identically.  But, the host above allows us to look at it
    using any level of authentication.  Any hosts you set up should be
    more restricted than that and require at least a level of
    authNoPriv when you configure the VACM access control.
    <p> Finally, consider a snmp.conf file that looks like this:
<ul>
<pre>
defContext none
defSecurityName MD5User
defAuthPassphrase The UCD Demo Password
defVersion 3
defAuthType MD5
defSecurityLevel authNoPriv
</pre>
</ul>
    This sets up the defaults for you so that your snmp commands can
    boil down to something as simple as:
<pre>
<ul>
% <b>snmpgetnext test.net-snmp.org sysUpTime</b>
system.sysUpTime.3.0 = Timeticks: (83517052) 9 days, 15:59:30.52
</ul>
</pre>
    <p>
      Or:
<pre>
<ul>
% <b>snmpset test.net-snmp.org ucdDemoPublicString.0 s "I changed  something"</b>
enterprises.ucdavis.ucdDemoMIB.ucdDemoMIBObjects.ucdDemoPublic.ucdDemoPublicString.2.0 = "I changed something"
</ul>
</pre>
    Then:
<pre>
<ul>
% <b>snmpget test.net-snmp.org ucdDemoPublicString.0</b>
enterprises.ucdavis.ucdDemoMIB.ucdDemoMIBObjects.ucdDemoPublic.ucdDemoPublicString.2.0 = "I changed something"
</ul>
</pre>
<!-- CONTENT END -->
<br />
<div id="w3Valid" class="w3Valid">
<p>
<!-- 
<a href="http://validator.w3.org/check/referer">
  <img src="/images/valid-xhtml10.png" style="border:0"
  alt="Valid XHTML 1.0!" height="31" width="88"/></a>
-->
<a href="../../../../jigsaw.w3.org/css-validator/validator6472.html?uri=http://www.net-snmp.org/layout1.css">
  <img style="border:0;width:88px;height:31px"
  src="../../../images/vcss.png" 
       alt="Valid CSS!" />
 </a>
</p>
</div> <!-- w3Valid /div -->
</div> <!-- CONTENT END /div -->

<div id="ModificationDate" class="ModificationDate">
  <hr />

<!-- MODIFICATION DATE START -->

<p>Last modified: Wednesday, 01-Aug-2018 04:41:28 UTC<br/>
For questions regarding web content and site functionality, please write to the <a href="mailto:net-snmp-users@lists.sourceforge.net">net-snmp-users mail list</a>.</p>

<!-- MODIFICATION DATE END -->

</div>

</body>


<!-- Mirrored from www.net-snmp.org/tutorial/tutorial-4/commands/snmpv3.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 May 2024 19:16:49 GMT -->
</html>



